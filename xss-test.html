<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XSS ë°©ì§€ í…ŒìŠ¤íŠ¸</title>
    <script src="utils.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .test-input { width: 100%; height: 60px; margin: 10px 0; }
        .test-output { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .safe { border-left: 4px solid #4CAF50; }
        .unsafe { border-left: 4px solid #f44336; }
    </style>
</head>
<body>
    <h1>XSS ë°©ì§€ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-section">
        <h2>ë©”ëª¨ ì…ë ¥ í…ŒìŠ¤íŠ¸</h2>
        <textarea id="memo-input" class="test-input" placeholder="í…ŒìŠ¤íŠ¸í•  ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
        <button onclick="testMemoSanitization()">ë©”ëª¨ ì •ì œ í…ŒìŠ¤íŠ¸</button>
        <div id="memo-output" class="test-output"></div>
    </div>
    
    <div class="test-section">
        <h2>ë™í–‰ì ì…ë ¥ í…ŒìŠ¤íŠ¸</h2>
        <textarea id="companions-input" class="test-input" placeholder="í…ŒìŠ¤íŠ¸í•  ë™í–‰ì ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"></textarea>
        <button onclick="testCompanionsSanitization()">ë™í–‰ì ì •ì œ í…ŒìŠ¤íŠ¸</button>
        <div id="companions-output" class="test-output"></div>
    </div>
    
    <div class="test-section">
        <h2>ìë™ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤</h2>
        <button onclick="runAutoTests()">ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="auto-test-output" class="test-output"></div>
    </div>

    <script>
        function testMemoSanitization() {
            const input = document.getElementById('memo-input').value;
            const sanitized = sanitizeMemo(input);
            const output = document.getElementById('memo-output');
            
            output.innerHTML = `
                <h3>ì›ë³¸ ì…ë ¥:</h3>
                <div class="unsafe">${input}</div>
                <h3>ì •ì œëœ ì¶œë ¥:</h3>
                <div class="safe">${sanitized}</div>
                <h3>HTML ë Œë”ë§ í…ŒìŠ¤íŠ¸:</h3>
                <div class="safe">${sanitized}</div>
            `;
        }
        
        function testCompanionsSanitization() {
            const input = document.getElementById('companions-input').value;
            const sanitized = sanitizeCompanions(input);
            const output = document.getElementById('companions-output');
            
            output.innerHTML = `
                <h3>ì›ë³¸ ì…ë ¥:</h3>
                <div class="unsafe">${input}</div>
                <h3>ì •ì œëœ ì¶œë ¥:</h3>
                <div class="safe">${sanitized}</div>
                <h3>HTML ë Œë”ë§ í…ŒìŠ¤íŠ¸:</h3>
                <div class="safe">${sanitized}</div>
            `;
        }
        
        function runAutoTests() {
            const testInputs = [
                '<script>alert("XSS")</script>',
                '<img src="x" onerror="alert(1)">',
                '&lt;script&gt;alert("ì´ë¯¸ ì´ìŠ¤ì¼€ì´í”„ë¨")&lt;/script&gt;',
                'javascript:alert("XSS")',
                '<a href="javascript:alert(1)">ë§í¬</a>',
                'ì •ìƒì ì¸ ë©”ëª¨ ë‚´ìš©ì…ë‹ˆë‹¤.',
                'ê¹€ì² ìˆ˜, ì´ì˜í¬ @username #hashtag',
                '<div style="background:red">ìŠ¤íƒ€ì¼ ê³µê²©</div>',
                '<iframe src="javascript:alert(1)"></iframe>',
                'ì•ˆë…•í•˜ì„¸ìš”! ì—¬í–‰ì€ ì¦ê±°ì› ìŠµë‹ˆë‹¤ ğŸ˜Š'
            ];
            
            let testResults = '<h3>ìë™ í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h3>';
            
            testInputs.forEach((input, index) => {
                const memoSanitized = sanitizeMemo(input);
                const companionsSanitized = sanitizeCompanions(input);
                
                testResults += `
                    <div style="margin: 15px 0; padding: 10px; border: 1px solid #ddd;">
                        <h4>í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ${index + 1}:</h4>
                        <p><strong>ì›ë³¸:</strong> ${input}</p>
                        <p><strong>ë©”ëª¨ ì •ì œ:</strong> ${memoSanitized}</p>
                        <p><strong>ë™í–‰ì ì •ì œ:</strong> ${companionsSanitized}</p>
                        <p><strong>HTML ë Œë”ë§:</strong></p>
                        <div style="background: #f9f9f9; padding: 5px; margin: 5px 0;">
                            ë©”ëª¨: ${memoSanitized}
                        </div>
                        <div style="background: #f9f9f9; padding: 5px; margin: 5px 0;">
                            ë™í–‰ì: ${companionsSanitized}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('auto-test-output').innerHTML = testResults;
        }
    </script>
</body>
</html>
