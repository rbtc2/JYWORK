<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°œì„ ëœ ëª¨ë‹¬ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .mini-map-container {
            background: #f3f4f6;
            border: 1px solid #e5e7eb;
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">ê°œì„ ëœ showEntryDetail ëª¨ë‹¬ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">í…ŒìŠ¤íŠ¸ ë°ì´í„°</h2>
            <p class="text-gray-600 mb-2">ì´ í˜ì´ì§€ëŠ” ê°œì„ ëœ showEntryDetail ëª¨ë‹¬ì˜ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            <p class="text-gray-600 mb-4">ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ëª¨ë‹¬ì„ ì—´ì–´ë³´ì„¸ìš”.</p>
            
            <button onclick="showTestModal()" 
                    class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                ğŸ§  ìŠ¤ë§ˆíŠ¸ ì¸ì‚¬ì´íŠ¸ ëª¨ë‹¬ ì—´ê¸°
            </button>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">ì£¼ìš” ê°œì„ ì‚¬í•­</h2>
            <ul class="space-y-2 text-gray-600">
                <li>âœ… <strong>ìŠ¤ë§ˆíŠ¸ ì»¨í…ìŠ¤íŠ¸ ì„¹ì…˜</strong> - ë°©ë¬¸ íšŸìˆ˜, ì´ì „ ë°©ë¬¸ì¼, êµ­ê°€ ì´ ì²´ë¥˜ì¼, ì „ì²´ í•´ì™¸ ì²´ë¥˜ì¼ ë¹„ìœ¨ ë“±</li>
                <li>âœ… <strong>UI êµ¬ì¡° ê°œì„ </strong> - ê¸°ë³¸ ì •ë³´, ìŠ¤ë§ˆíŠ¸ ì¸ì‚¬ì´íŠ¸, ì¶”ê°€ ì •ë³´ë¥¼ ëª…í™•íˆ êµ¬ë¶„</li>
                <li>âœ… <strong>ë™í–‰ì/ë©”ëª¨ ì¡°ê±´ë¶€ í‘œì‹œ</strong> - ìˆì„ ë•Œë§Œ í‘œì‹œí•˜ì—¬ ë¶ˆí•„ìš”í•œ ì •ë³´ ìˆ¨ê¹€</li>
                <li>âœ… <strong>ì¼ê´€ëœ ë””ìì¸</strong> - ì„¹ì…˜ë³„ í—¤ë”ì™€ êµ¬ë¶„ì„ ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ</li>
                <li>âœ… <strong>ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ</strong> - ëª¨ë°”ì¼ê³¼ ë°ìŠ¤í¬íƒ‘ ëª¨ë‘ ìµœì í™”</li>
            </ul>
        </div>
    </div>

    <script>
        // í…ŒìŠ¤íŠ¸ìš© ë°ì´í„°
        const testEntries = [
            {
                id: '1',
                city: 'í•„ë¼ë¸í”¼ì•„',
                country: 'ë¯¸êµ­',
                countryCode: 'US',
                startDate: '2025-08-26',
                endDate: '2025-08-28',
                purpose: 'study',
                rating: 5,
                companions: 'ê°€ì¡±',
                companionType: 'family',
                memo: 'ì •ë§ ì¢‹ì•˜ë˜ ì—¬í–‰ì´ì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ììœ ì˜ ì¢…ì„ ë³´ëŠ” ê²ƒì´ ì¸ìƒì ì´ì—ˆì–´ìš”.'
            },
            {
                id: '2',
                city: 'í•„ë¼ë¸í”¼ì•„',
                country: 'ë¯¸êµ­',
                countryCode: 'US',
                startDate: '2024-12-15',
                endDate: '2024-12-20',
                purpose: 'tourism',
                rating: 4,
                companions: 'í˜¼ì',
                companionType: 'alone',
                memo: 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì‹œì¦Œì˜ í•„ë¼ë¸í”¼ì•„ëŠ” ì •ë§ ì•„ë¦„ë‹¤ì› ìŠµë‹ˆë‹¤.'
            },
            {
                id: '3',
                city: 'ë‰´ìš•',
                country: 'ë¯¸êµ­',
                countryCode: 'US',
                startDate: '2024-06-10',
                endDate: '2024-06-15',
                purpose: 'business',
                rating: 3,
                companions: 'ë™ë£Œ',
                companionType: 'colleagues',
                memo: 'ì—…ë¬´ë¡œ ë°©ë¬¸í–ˆì§€ë§Œ ììœ ì‹œê°„ì— íƒ€ì„ìŠ¤í€˜ì–´ë¥¼ êµ¬ê²½í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.'
            }
        ];

        // ì „ì—­ ë³€ìˆ˜ ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)
        window.entries = testEntries;
        window.userResidence = {
            country: 'í•œêµ­',
            countryCode: 'KR',
            city: 'ì„œìš¸'
        };

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ (í…ŒìŠ¤íŠ¸ìš©)
        function calculateDays(startDate, endDate) {
            if (!startDate || !endDate) return 0;
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays + 1;
        }

        function getVisitStats(cityName, countryCode, entries) {
            if (!entries || !Array.isArray(entries)) {
                return {
                    visitCount: 0,
                    totalDays: 0,
                    previousVisit: null,
                    longestStay: 0,
                    highestRating: 0,
                    averageRating: 0
                };
            }

            const cityEntries = entries.filter(entry => 
                entry.city === cityName && entry.countryCode === countryCode
            );

            if (cityEntries.length === 0) {
                return {
                    visitCount: 0,
                    totalDays: 0,
                    previousVisit: null,
                    longestStay: 0,
                    highestRating: 0,
                    averageRating: 0
                };
            }

            const visitCount = cityEntries.length;
            const totalDays = cityEntries.reduce((total, entry) => {
                const days = calculateDays(entry.startDate, entry.endDate);
                return total + days;
            }, 0);

            const sortedEntries = cityEntries
                .sort((a, b) => new Date(b.startDate) - new Date(a.startDate));
            
            const previousVisit = sortedEntries.length > 1 ? sortedEntries[1] : null;

            const longestStay = Math.max(...cityEntries.map(entry => 
                calculateDays(entry.startDate, entry.endDate)
            ));

            const ratings = cityEntries
                .map(entry => entry.rating || 0)
                .filter(rating => rating > 0);
            
            const highestRating = ratings.length > 0 ? Math.max(...ratings) : 0;
            const averageRating = ratings.length > 0 ? 
                Math.round((ratings.reduce((sum, rating) => sum + rating, 0) / ratings.length) * 10) / 10 : 0;

            return {
                visitCount,
                totalDays,
                previousVisit,
                longestStay,
                highestRating,
                averageRating
            };
        }

        function getCountryStats(countryCode, entries) {
            if (!entries || !Array.isArray(entries)) {
                return { totalDays: 0, visitCount: 0, cities: [] };
            }

            const countryEntries = entries.filter(entry => 
                entry.countryCode === countryCode
            );

            if (countryEntries.length === 0) {
                return { totalDays: 0, visitCount: 0, cities: [] };
            }

            const totalDays = countryEntries.reduce((total, entry) => {
                const days = calculateDays(entry.startDate, entry.endDate);
                return total + days;
            }, 0);

            const visitCount = countryEntries.length;
            const cities = [...new Set(countryEntries.map(entry => entry.city))];

            return { totalDays, visitCount, cities };
        }

        function getTotalOverseasDays(entries, userResidence) {
            if (!entries || !Array.isArray(entries)) return 0;

            let totalDays = 0;
            entries.forEach(entry => {
                if (userResidence && userResidence.countryCode && 
                    entry.countryCode === userResidence.countryCode) {
                    return;
                }
                const days = calculateDays(entry.startDate, entry.endDate);
                totalDays += days;
            });

            return totalDays;
        }

        // êµ­ê°€ ì½”ë“œë¥¼ í•œêµ­ì–´ êµ­ê°€ ì´ë¦„ìœ¼ë¡œ ë³€í™˜
        function getCountryName(countryCode) {
            if (!countryCode) return 'ì•Œ ìˆ˜ ì—†ìŒ';
            
            const countryNames = {
                'KR': 'í•œêµ­',
                'JP': 'ì¼ë³¸',
                'CN': 'ì¤‘êµ­',
                'US': 'ë¯¸êµ­',
                'GB': 'ì˜êµ­',
                'FR': 'í”„ë‘ìŠ¤',
                'DE': 'ë…ì¼',
                'IT': 'ì´íƒˆë¦¬ì•„',
                'ES': 'ìŠ¤í˜ì¸',
                'NL': 'ë„¤ëœë€ë“œ',
                'BE': 'ë²¨ê¸°ì—',
                'CH': 'ìŠ¤ìœ„ìŠ¤',
                'AT': 'ì˜¤ìŠ¤íŠ¸ë¦¬ì•„',
                'SE': 'ìŠ¤ì›¨ë´',
                'NO': 'ë…¸ë¥´ì›¨ì´',
                'DK': 'ë´ë§ˆí¬',
                'AU': 'í˜¸ì£¼',
                'CA': 'ìºë‚˜ë‹¤',
                'NZ': 'ë‰´ì§ˆëœë“œ',
                'SG': 'ì‹±ê°€í¬ë¥´',
                'TH': 'íƒœêµ­',
                'MY': 'ë§ë ˆì´ì‹œì•„',
                'VN': 'ë² íŠ¸ë‚¨',
                'IN': 'ì¸ë„',
                'BR': 'ë¸Œë¼ì§ˆ',
                'MX': 'ë©•ì‹œì½”',
                'RU': 'ëŸ¬ì‹œì•„',
                'TR': 'í„°í‚¤',
                'PL': 'í´ë€ë“œ',
                'CZ': 'ì²´ì½”',
                'HU': 'í—ê°€ë¦¬',
                'FI': 'í•€ë€ë“œ',
                'IE': 'ì•„ì¼ëœë“œ',
                'PT': 'í¬ë¥´íˆ¬ê°ˆ'
            };
            
            return countryNames[countryCode] || countryCode;
        }

        function getCityHistory(entry, entries, userResidence) {
            const cityStats = getVisitStats(entry.city, entry.countryCode, entries);
            const countryStats = getCountryStats(entry.countryCode, entries);
            const totalOverseasDays = getTotalOverseasDays(entries, userResidence);
            const countryName = getCountryName(entry.countryCode);

            let previousVisitText = null;
            if (cityStats.previousVisit) {
                const prevDate = new Date(cityStats.previousVisit.startDate);
                const year = prevDate.getFullYear();
                const month = prevDate.getMonth() + 1;
                previousVisitText = `${year}ë…„ ${month}ì›”`;
            }

            const overseasPercentage = totalOverseasDays > 0 ? 
                Math.round((countryStats.totalDays / totalOverseasDays) * 100) : 0;

            return {
                cityStats,
                countryStats,
                totalOverseasDays,
                previousVisitText,
                overseasPercentage,
                countryName
            };
        }

        function getCompanionText(entry) {
            if (!entry) return 'ì—†ìŒ';
            
            // companionTypeì´ ì—†ê±°ë‚˜ ë¹ˆ ë¬¸ìì—´ì¸ ê²½ìš°
            if (!entry.companionType || entry.companionType === '') {
                return 'ì—†ìŒ';
            }
            
            if (typeof entry.companions === 'string') {
                return entry.companions.trim() || 'ì—†ìŒ';
            }
            
            if (entry.companions && typeof entry.companions === 'object') {
                if (entry.companions.type === 'none') return 'ì—†ìŒ';
                if (entry.companions.type === 'alone') return 'í˜¼ì';
                if (entry.companions.type === 'friends') return 'ì¹œêµ¬';
                if (entry.companions.type === 'colleagues') return 'ë™ë£Œ';
                if (entry.companions.type === 'custom' && entry.companions.value) {
                    return entry.companions.value;
                }
                return 'ì—†ìŒ';
            }
            
            return 'ì—†ìŒ';
        }

        function getPurposeText(purpose) {
            if (!purpose) return 'ê¸°íƒ€';
            
            const purposeMap = {
                'tourism': 'ê´€ê´‘',
                'business': 'ì—…ë¬´',
                'study': 'ìœ í•™',
                'work': 'ê·¼ë¬´',
                'family': 'ê°€ì¡± ë°©ë¬¸',
                'medical': 'ì˜ë£Œ',
                'other': 'ê¸°íƒ€'
            };
            
            return purposeMap[purpose] || purpose;
        }

        function generateStarRating(rating) {
            if (!rating || rating < 1) rating = 0;
            
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<span class="text-yellow-400">â­</span>';
                } else {
                    stars += '<span class="text-gray-300">â­</span>';
                }
            }
            return stars;
        }

        function sanitizeMemo(memo) {
            return memo || '';
        }

        function isMemoTruncated(memo, maxLength = 100) {
            return memo && memo.length > maxLength;
        }

        function truncateMemoForDetail(memo, maxLength = 100) {
            return memo ? memo.substring(0, maxLength) + '...' : '';
        }

        // í…ŒìŠ¤íŠ¸ ëª¨ë‹¬ í‘œì‹œ
        function showTestModal() {
            const entry = testEntries[0]; // ì²« ë²ˆì§¸ í•­ëª©ìœ¼ë¡œ í…ŒìŠ¤íŠ¸
            const days = calculateDays(entry.startDate, entry.endDate);
            const purposeText = getPurposeText(entry.purpose);
            const flag = 'ğŸ‡ºğŸ‡¸';
            const countryName = entry.country;
            const cityName = entry.city;

            // ìŠ¤ë§ˆíŠ¸ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ê³„ì‚°
            const cityHistory = getCityHistory(entry, testEntries, window.userResidence);
                    const hasCompanions = entry.companionType && entry.companionType !== '' && entry.companions && (
            (typeof entry.companions === 'string' && entry.companions.trim()) ||
            (typeof entry.companions === 'object' && entry.companions.type !== 'none')
        );
            const hasMemo = entry.memo && entry.memo.trim();

            const modalHTML = `
                <div id="entry-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div class="bg-white rounded-xl shadow-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                        <!-- í—¤ë” -->
                        <div class="flex justify-between items-start sm:items-center p-4 sm:p-6 border-b border-gray-100 relative">
                            <div class="flex items-start sm:items-center space-x-3 sm:space-x-4 flex-1 min-w-0 pr-12">
                                <span class="text-3xl sm:text-4xl flex-shrink-0" aria-label="${countryName} êµ­ê¸°">${flag}</span>
                                <div class="flex-1 min-w-0">
                                    <div class="block sm:hidden">
                                        <h2 class="text-lg font-bold text-gray-800 truncate">${cityName}, ${countryName}</h2>
                                    </div>
                                    <div class="hidden sm:block">
                                        <h2 class="text-xl sm:text-2xl font-bold text-gray-800 truncate">${cityName}, ${countryName}</h2>
                                    </div>
                                    <p class="text-sm sm:text-lg text-gray-600 mt-1 truncate">${entry.startDate} ~ ${entry.endDate}</p>
                                </div>
                            </div>
                            <button onclick="closeTestModal()" 
                                    class="absolute top-4 right-4 sm:relative sm:top-auto sm:right-auto text-gray-400 hover:text-gray-600 text-xl sm:text-2xl font-bold flex-shrink-0 w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors"
                                    aria-label="ëª¨ë‹¬ ë‹«ê¸°">
                                Ã—
                            </button>
                        </div>

                        <!-- ì¹´ë“œ ë³¸ë¬¸ -->
                        <div class="p-6 space-y-6">
                            <!-- ê¸°ë³¸ ì •ë³´ ì„¹ì…˜ -->
                            <div class="space-y-4">
                                <h3 class="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">ğŸ“‹ ê¸°ë³¸ ì •ë³´</h3>
                                
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ğŸ“…</span>
                                        <div>
                                            <p class="text-sm text-gray-500">ì²´ë¥˜ ê¸°ê°„</p>
                                            <p class="text-lg font-semibold text-gray-800">${entry.startDate} ~ ${entry.endDate}</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <p class="text-sm text-gray-500">ì´ ì²´ë¥˜ ì¼ìˆ˜</p>
                                        <p class="text-xl font-bold text-blue-600">${days}ì¼</p>
                                    </div>
                                </div>
                                
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">ğŸ¯</span>
                                    <div>
                                        <p class="text-sm text-gray-500">ì²´ë¥˜ ëª©ì </p>
                                        <p class="text-lg font-semibold text-gray-800">${purposeText}</p>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">â­</span>
                                        <div>
                                            <p class="text-sm text-gray-500">ë³„ì  í‰ê°€</p>
                                            <p class="text-lg font-semibold text-gray-800">${entry.rating || 0}ì </p>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-1">
                                        ${generateStarRating(entry.rating || 0)}
                                    </div>
                                </div>
                            </div>

                            <!-- ìŠ¤ë§ˆíŠ¸ ì»¨í…ìŠ¤íŠ¸ ì„¹ì…˜ (í•­ìƒ í‘œì‹œ) -->
                            <div class="bg-blue-50 rounded-lg p-6 space-y-4">
                                <h3 class="text-lg font-semibold text-blue-800 border-b border-blue-200 pb-2">ğŸ§  ìŠ¤ë§ˆíŠ¸ ì¸ì‚¬ì´íŠ¸</h3>
                                
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ğŸ”„</span>
                                        <div>
                                            <p class="text-sm text-blue-600">ë°©ë¬¸ íšŸìˆ˜</p>
                                            <p class="text-lg font-semibold text-blue-800">
                                                ${cityName} ${cityHistory.cityStats.visitCount}ë²ˆì§¸ ë°©ë¬¸
                                                ${cityHistory.previousVisitText ? `(ì´ì „: ${cityHistory.previousVisitText})` : ''}
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ğŸ’¡</span>
                                        <div>
                                            <p class="text-sm text-blue-600">êµ­ê°€ ì´ ì²´ë¥˜ì¼</p>
                                            <p class="text-lg font-semibold text-blue-800">
                                                ${countryName} ì´ ${cityHistory.countryStats.totalDays}ì¼
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ğŸŒ</span>
                                        <div>
                                            <p class="text-sm text-blue-600">ì „ì²´ í•´ì™¸ ì²´ë¥˜ì¼</p>
                                            <p class="text-lg font-semibold text-blue-800">
                                                ${cityHistory.totalOverseasDays}ì¼ ì¤‘ ${cityHistory.overseasPercentage}%
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">ğŸ†</span>
                                        <div>
                                            <p class="text-sm text-blue-600">${cityHistory.countryName} ë°©ë¬¸ ê¸°ë¡</p>
                                            <p class="text-lg font-semibold text-blue-800">
                                                ìµœì¥ ì²´ë¥˜: ${cityHistory.cityStats.longestStay}ì¼
                                                ${cityHistory.cityStats.highestRating > 0 ? `| ìµœê³  ë³„ì : ${cityHistory.cityStats.highestRating}ì ` : ''}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì„ íƒì  ì •ë³´ ì„¹ì…˜ (ìˆì„ ë•Œë§Œ í‘œì‹œ) -->
                            ${hasCompanions || hasMemo ? `
                            <div class="space-y-4">
                                <h3 class="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2">ğŸ“ ì¶”ê°€ ì •ë³´</h3>
                                
                                ${hasCompanions ? `
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl mt-1">ğŸ‘¥</span>
                                    <div class="flex-1">
                                        <p class="text-sm text-gray-500">ë™í–‰ì</p>
                                        <p class="text-lg font-semibold text-gray-800">${getCompanionText(entry)}</p>
                                    </div>
                                </div>
                                ` : ''}
                                
                                ${hasMemo ? `
                                <div class="bg-gray-50 rounded-lg p-6 space-y-4">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-2xl mt-1">ğŸ“</span>
                                        <div class="flex-1">
                                            <p class="text-sm text-gray-500">ë©”ëª¨</p>
                                            <div class="text-lg font-semibold text-gray-800">
                                                <div id="memo-content-${entry.id}" class="memo-content">
                                                    <span id="memo-text-${entry.id}">${isMemoTruncated(entry.memo, 100) ? truncateMemoForDetail(entry.memo) : sanitizeMemo(entry.memo)}</span>
                                                    ${isMemoTruncated(entry.memo, 100) ? `
                                                        <button onclick="toggleMemoDetail('${entry.id}')" class="ml-2 text-blue-600 hover:text-blue-800 text-sm font-medium underline">
                                                            ë”ë³´ê¸°
                                                        </button>
                                                    ` : ''}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                ` : ''}
                            </div>
                            ` : ''}

                            <!-- ìœ„ì¹˜ ì§€ë„ -->
                            <div class="mt-6">
                                <h3 class="text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2 mb-4">ğŸ—ºï¸ ìœ„ì¹˜ ì •ë³´</h3>
                                <div class="flex items-center space-x-3 mb-4">
                                    <span class="text-2xl">ğŸ“</span>
                                    <div>
                                        <p class="text-sm text-gray-500">ìœ„ì¹˜</p>
                                        <p class="text-lg font-semibold text-gray-800">${cityName}, ${countryName}</p>
                                    </div>
                                </div>
                                <div class="bg-gray-100 rounded-lg overflow-hidden h-48 flex items-center justify-center">
                                    <div class="text-center">
                                        <p class="text-gray-500 text-sm">ğŸ“ ìœ„ì¹˜ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- í•˜ë‹¨ ë²„íŠ¼ -->
                        <div class="p-6 border-t border-gray-100">
                            <div class="flex justify-center">
                                <div class="flex space-x-2 max-w-md w-full">
                                    <button onclick="closeTestModal()" 
                                            class="flex-1 px-4 py-2.5 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors text-sm font-medium min-h-[40px]">
                                        âœ• ë‹«ê¸°
                                    </button>
                                    <button onclick="alert('ìˆ˜ì • ê¸°ëŠ¥ì€ ì‹¤ì œ ì•±ì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤')" 
                                            class="flex-1 px-4 py-2.5 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 focus:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 transition-colors text-sm font-medium min-h-[40px]">
                                        âœï¸ ìˆ˜ì •
                                    </button>
                                    <button onclick="alert('ì‚­ì œ ê¸°ëŠ¥ì€ ì‹¤ì œ ì•±ì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤')" 
                                            class="flex-1 px-4 py-2.5 bg-red-500 text-white rounded-lg hover:bg-red-600 focus:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors text-sm font-medium min-h-[40px]">
                                        ğŸ—‘ï¸ ì‚­ì œ
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function closeTestModal() {
            const modal = document.getElementById('entry-detail-modal');
            if (modal) {
                modal.remove();
            }
        }

        function toggleMemoDetail(entryId) {
            const memoText = document.getElementById(`memo-text-${entryId}`);
            const memoContent = document.getElementById(`memo-content-${entryId}`);
            
            if (memoText && memoContent) {
                const entry = testEntries.find(e => e.id === entryId);
                if (entry && entry.memo) {
                    if (memoText.textContent.includes('...')) {
                        memoText.textContent = entry.memo;
                        memoText.nextElementSibling.textContent = 'ì ‘ê¸°';
                    } else {
                        memoText.textContent = truncateMemoForDetail(entry.memo);
                        memoText.nextElementSibling.textContent = 'ë”ë³´ê¸°';
                    }
                }
            }
        }
    </script>
</body>
</html>
