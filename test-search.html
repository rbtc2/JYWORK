<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—¬í–‰ ê¸°ë¡ ê²€ìƒ‰ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .search-result-card:hover {
            transform: translateY(-2px);
        }
        .search-result-card {
            transition: all 0.2s ease-in-out;
        }
        mark {
            background-color: #fef3c7;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- í—¤ë” -->
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">ğŸ” ì—¬í–‰ ê¸°ë¡ ê²€ìƒ‰</h1>
                <p class="text-gray-600">êµ­ê°€, ë„ì‹œ, ë™í–‰ì, ëª©ì  ë“±ìœ¼ë¡œ ì—¬í–‰ ê¸°ë¡ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”</p>
            </div>

            <!-- ê²€ìƒ‰ í¼ -->
            <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                <div class="flex flex-col sm:flex-row gap-4">
                    <div class="flex-1">
                        <label for="search-input" class="block text-sm font-medium text-gray-700 mb-2">
                            ê²€ìƒ‰ì–´ ì…ë ¥
                        </label>
                        <input type="text" 
                               id="search-input" 
                               placeholder="ì˜ˆ: ì¼ë³¸, ë„ì¿„, í˜¼ì, ê´€ê´‘, 2024..."
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="flex items-end">
                        <button id="search-button" 
                                class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
                            ê²€ìƒ‰
                        </button>
                    </div>
                </div>
                
                <!-- ê²€ìƒ‰ íŒ -->
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <h3 class="text-sm font-medium text-blue-800 mb-2">ğŸ’¡ ê²€ìƒ‰ íŒ</h3>
                    <div class="text-sm text-blue-700 space-y-1">
                        <p>â€¢ <strong>êµ­ê°€/ë„ì‹œ:</strong> "ì¼ë³¸", "ë„ì¿„", "JP" ë“±</p>
                        <p>â€¢ <strong>ë™í–‰ì:</strong> "í˜¼ì", "ê°€ì¡±", "ì¹œêµ¬" ë“±</p>
                        <p>â€¢ <strong>ëª©ì :</strong> "ê´€ê´‘", "ì—…ë¬´", "ìœ í•™" ë“±</p>
                        <p>â€¢ <strong>ë‚ ì§œ:</strong> "2024", "2024-03" ë“±</p>
                        <p>â€¢ <strong>ë©”ëª¨:</strong> ë©”ëª¨ ë‚´ìš©ì— í¬í•¨ëœ ë‹¨ì–´</p>
                    </div>
                </div>
            </div>

            <!-- ê²€ìƒ‰ ê²°ê³¼ -->
            <div id="search-results"></div>

            <!-- ìƒ˜í”Œ ë°ì´í„° í‘œì‹œ -->
            <div class="mt-12 bg-white rounded-lg shadow-md p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“Š í˜„ì¬ ë“±ë¡ëœ ì—¬í–‰ ê¸°ë¡</h2>
                <div id="sample-entries" class="space-y-3"></div>
            </div>
        </div>
    </div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ -->
    <script src="data.js"></script>
    <script src="utils.js"></script>
    <script src="main.js"></script>
    
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            // ìƒ˜í”Œ ë°ì´í„° ìƒì„± (í…ŒìŠ¤íŠ¸ìš©)
            const sampleEntries = [
                {
                    id: '1',
                    country: 'ì¼ë³¸',
                    countryCode: 'JP',
                    city: 'ë„ì¿„',
                    startDate: '2024-03-15',
                    endDate: '2024-03-20',
                    purpose: 'tourism',
                    companionType: 'solo',
                    companions: 'í˜¼ì',
                    rating: 5,
                    memo: 'ë„ì¿„ íƒ€ì›Œì™€ ì‹œë¶€ì•¼ë¥¼ ë°©ë¬¸í–ˆìŠµë‹ˆë‹¤. ë§›ìˆëŠ” ë¼ë©˜ì„ ë¨¹ì—ˆì–´ìš”!'
                },
                {
                    id: '2',
                    country: 'ë¯¸êµ­',
                    countryCode: 'US',
                    city: 'ë‰´ìš•',
                    startDate: '2024-02-10',
                    endDate: '2024-02-15',
                    purpose: 'business',
                    companionType: 'colleagues',
                    companions: 'ë™ë£Œ',
                    rating: 4,
                    memo: 'ë¹„ì¦ˆë‹ˆìŠ¤ ë¯¸íŒ…ê³¼ ììœ ì˜ ì—¬ì‹ ìƒì„ êµ¬ê²½í–ˆìŠµë‹ˆë‹¤.'
                },
                {
                    id: '3',
                    country: 'í”„ë‘ìŠ¤',
                    countryCode: 'FR',
                    city: 'íŒŒë¦¬',
                    startDate: '2024-01-20',
                    endDate: '2024-01-25',
                    purpose: 'tourism',
                    companionType: 'family',
                    companions: 'ê°€ì¡±',
                    rating: 5,
                    memo: 'ì—í íƒ‘ê³¼ ë£¨ë¸Œë¥´ ë°•ë¬¼ê´€ì„ ë°©ë¬¸í–ˆìŠµë‹ˆë‹¤. ì™€ì¸ë„ ë§›ìˆì—ˆì–´ìš”!'
                },
                {
                    id: '4',
                    country: 'ëŒ€í•œë¯¼êµ­',
                    countryCode: 'KR',
                    city: 'ë¶€ì‚°',
                    startDate: '2024-04-01',
                    endDate: '2024-04-03',
                    purpose: 'family',
                    companionType: 'friends',
                    companions: 'ì¹œêµ¬',
                    rating: 4,
                    memo: 'í•´ìš´ëŒ€ í•´ìˆ˜ìš•ì¥ê³¼ ê´‘ì•ˆëŒ€êµ ì•¼ê²½ì„ ë³´ì•˜ìŠµë‹ˆë‹¤.'
                },
                {
                    id: '5',
                    country: 'ì˜êµ­',
                    countryCode: 'GB',
                    city: 'ëŸ°ë˜',
                    startDate: '2023-12-20',
                    endDate: '2023-12-25',
                    purpose: 'study',
                    companionType: 'solo',
                    companions: 'í˜¼ì',
                    rating: 5,
                    memo: 'ì˜ì–´ ê³µë¶€ë¥¼ ìœ„í•´ ëŸ°ë˜ì— ê°”ìŠµë‹ˆë‹¤. ë¹…ë²¤ê³¼ íƒ€ì›Œë¸Œë¦¬ì§€ë¥¼ ë³´ì•˜ì–´ìš”.'
                }
            ];

            // ì „ì—­ entries ë°°ì—´ì— ìƒ˜í”Œ ë°ì´í„° ì„¤ì •
            window.entries = sampleEntries;

            // ìƒ˜í”Œ ë°ì´í„° í‘œì‹œ
            displaySampleEntries(sampleEntries);

            // ê²€ìƒ‰ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™”
            initializeSearchEventListeners();

            // êµ­ê°€ í”Œë˜ê·¸ ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)
            window.countryFlags = {
                'JP': 'ğŸ‡¯ğŸ‡µ',
                'US': 'ğŸ‡ºğŸ‡¸',
                'FR': 'ğŸ‡«ğŸ‡·',
                'KR': 'ğŸ‡°ğŸ‡·',
                'GB': 'ğŸ‡¬ğŸ‡§'
            };
        });

        // ìƒ˜í”Œ ë°ì´í„° í‘œì‹œ í•¨ìˆ˜
        function displaySampleEntries(entries) {
            const container = document.getElementById('sample-entries');
            if (!container) return;

            const entriesHTML = entries.map(entry => {
                const days = calculateDays(entry.startDate, entry.endDate);
                const purposeText = getPurposeText(entry.purpose);
                const companionText = getCompanionText(entry);
                const flag = window.countryFlags[entry.countryCode] || 'ğŸ³ï¸';

                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <span class="text-2xl">${flag}</span>
                            <div>
                                <div class="font-medium text-gray-800">${entry.city}, ${entry.country}</div>
                                <div class="text-sm text-gray-600">${entry.startDate} ~ ${entry.endDate} (${days}ì¼)</div>
                            </div>
                        </div>
                        <div class="text-right text-sm text-gray-600">
                            <div>${purposeText}</div>
                            <div>${companionText}</div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = entriesHTML;
        }

        // ì „ì—­ í•¨ìˆ˜ë“¤ (í…ŒìŠ¤íŠ¸ìš©)
        function calculateDays(startDate, endDate) {
            if (!startDate || !endDate) return 0;
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays + 1;
        }

        function getPurposeText(purpose) {
            const purposeMap = {
                'tourism': 'ê´€ê´‘',
                'business': 'ì—…ë¬´',
                'study': 'ìœ í•™',
                'work': 'ê·¼ë¬´',
                'family': 'ê°€ì¡± ë°©ë¬¸',
                'medical': 'ì˜ë£Œ',
                'other': 'ê¸°íƒ€'
            };
            return purposeMap[purpose] || purpose;
        }

        function getCompanionText(entry) {
            if (!entry.companionType || entry.companionType === '') {
                return 'ì •ë³´ ì—†ìŒ';
            }
            if (entry.companionType === 'solo') {
                return 'í˜¼ì';
            }
            if (typeof entry.companions === 'string') {
                return entry.companions.trim() || 'ì •ë³´ ì—†ìŒ';
            }
            if (entry.companions && typeof entry.companions === 'object') {
                if (entry.companions.type === 'none') return 'ì •ë³´ ì—†ìŒ';
                if (entry.companions.type === 'alone') return 'í˜¼ì';
                if (entry.companions.type === 'family') return 'ê°€ì¡±';
                if (entry.companions.type === 'friends') return 'ì¹œêµ¬';
                if (entry.companions.type === 'colleagues') return 'ë™ë£Œ';
                if (entry.companions.type === 'custom' && entry.companions.value) {
                    return entry.companions.value;
                }
                return 'ì •ë³´ ì—†ìŒ';
            }
            return 'ì •ë³´ ì—†ìŒ';
        }

        function generateStarRating(rating) {
            if (!rating || rating < 1) rating = 0;
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<span class="text-yellow-400">â­</span>';
                } else {
                    stars += '<span class="text-gray-300">â­</span>';
                }
            }
            return stars;
        }

        // showEntryDetail í•¨ìˆ˜ (í…ŒìŠ¤íŠ¸ìš©)
        function showEntryDetail(entryId) {
            const entry = window.entries.find(e => e.id === entryId);
            if (!entry) return;

            alert(`ì—¬í–‰ ê¸°ë¡ ìƒì„¸ ì •ë³´:\n\në„ì‹œ: ${entry.city}, ${entry.country}\nê¸°ê°„: ${entry.startDate} ~ ${entry.endDate}\nëª©ì : ${getPurposeText(entry.purpose)}\në™í–‰ì: ${getCompanionText(entry)}\në©”ëª¨: ${entry.memo || 'ì—†ìŒ'}`);
        }
    </script>
</body>
</html>
