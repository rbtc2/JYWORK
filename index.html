<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¸ê³„ ì—¬í–‰ ì•±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .nav-tab {
            transition: all 0.3s ease;
        }
        
        .nav-tab:hover {
            background-color: #f3f4f6;
        }
        
        .nav-tab.active {
            background-color: #3b82f6;
            color: white;
        }
        
        @media (max-width: 640px) {
            .nav-container {
                padding: 0.5rem;
            }
            
            .nav-tab {
                padding: 0.75rem 0.5rem;
                font-size: 0.875rem;
            }
        }

        /* ìº˜ë¦°ë” ì´ë²¤íŠ¸ ìŠ¤íƒ€ì¼ (êµ¬ê¸€ ìº˜ë¦°ë” ìŠ¤íƒ€ì¼) */
        .calendar-event {
            display: block;
            width: 100%;
            padding: 2px 6px;
            margin: 1px 0;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 500;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            border-left: 3px solid;
        }

        .calendar-event:hover {
            transform: scale(1.02);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* ì´ë²¤íŠ¸ ìƒ‰ìƒ ë³€í˜• */
        .calendar-event.event-1 { background-color: #4285f4; border-left-color: #1a73e8; }
        .calendar-event.event-2 { background-color: #ea4335; border-left-color: #d93025; }
        .calendar-event.event-3 { background-color: #fbbc04; border-left-color: #f9ab00; }
        .calendar-event.event-4 { background-color: #34a853; border-left-color: #137333; }
        .calendar-event.event-5 { background-color: #9c27b0; border-left-color: #7b1fa2; }
        .calendar-event.event-6 { background-color: #ff9800; border-left-color: #f57c00; }
        .calendar-event.event-7 { background-color: #795548; border-left-color: #5d4037; }
        .calendar-event.event-8 { background-color: #607d8b; border-left-color: #455a64; }

        /* íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .calendar-tooltip {
            animation: tooltipFadeIn 0.2s ease-out;
        }

        @keyframes tooltipFadeIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ëª¨ë°”ì¼ì—ì„œ í„°ì¹˜ ì˜ì—­ í™•ëŒ€ */
        @media (max-width: 768px) {
            .calendar-event {
                padding: 3px 8px;
                font-size: 0.8rem;
                margin: 2px 0;
            }
            
            /* ëª¨ë°”ì¼ì—ì„œ ìº˜ë¦°ë” ë„¤ë¹„ê²Œì´ì…˜ ìµœì í™” */
            #year-select, #month-select {
                font-size: 0.875rem;
                padding: 0.5rem 0.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="nav-container max-w-4xl mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="text-xl font-bold text-gray-800 py-4">
                    ğŸŒ ì—¬í–‰ ì•±
                </div>
                
                <!-- ì‚¬ìš©ì ì •ë³´ ë° ë¡œê·¸ì¸ ë²„íŠ¼ -->
                <div class="flex items-center space-x-4">
                    <!-- ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ (ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€) -->
                    <div id="user-info" class="hidden flex items-center space-x-2">
                        <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
                            <span class="text-white text-sm font-medium" id="user-initial">U</span>
                        </div>
                        <span class="text-sm font-medium text-gray-700" id="username">ì‚¬ìš©ì</span>
                    </div>
                    
                    <!-- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
                    <div class="flex items-center space-x-2">
                        <button id="login-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors">
                            ë¡œê·¸ì¸
                        </button>
                        <button id="logout-btn" class="hidden text-sm text-gray-600 hover:text-gray-800 font-medium transition-colors">
                            ë¡œê·¸ì•„ì›ƒ
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="flex space-x-1 pb-2">
                <button class="nav-tab active flex-1 py-3 px-4 rounded-lg text-sm font-medium text-center transition-colors" data-section="world-map">
                    ğŸ—ºï¸ ì„¸ê³„ì§€ë„
                </button>
                <button class="nav-tab flex-1 py-3 px-4 rounded-lg text-sm font-medium text-center transition-colors text-gray-600" data-section="dashboard">
                    ğŸ“Š ëŒ€ì‹œë³´ë“œ
                </button>
                <button class="nav-tab flex-1 py-3 px-4 rounded-lg text-sm font-medium text-center transition-colors text-gray-600" data-section="timeline">
                    â° íƒ€ì„ë¼ì¸
                </button>
                <button class="nav-tab flex-1 py-3 px-4 rounded-lg text-sm font-medium text-center transition-colors text-gray-600" data-section="calendar">
                    ğŸ“… ìº˜ë¦°ë”
                </button>
                <button class="nav-tab flex-1 py-3 px-4 rounded-lg text-sm font-medium text-center transition-colors text-gray-600" data-section="settings">
                    âš™ï¸ ì„¤ì •
                </button>
            </div>
        </div>
    </nav>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- ì„¸ê³„ì§€ë„ ì„¹ì…˜ -->
        <section id="world-map" class="content-section block">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
                <div class="text-center">
                    <div class="text-6xl mb-6">ğŸ—ºï¸</div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">ì„¸ê³„ì§€ë„</h1>
                    <p class="text-gray-600 text-lg leading-relaxed max-w-2xl mx-auto">
                        ì „ ì„¸ê³„ ì—¬í–‰ì§€ë¥¼ ì¸í„°ë™í‹°ë¸Œ ì§€ë„ì—ì„œ íƒìƒ‰í•˜ì„¸ìš”. 
                        ê° êµ­ê°€ì™€ ë„ì‹œë¥¼ í´ë¦­í•˜ì—¬ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, 
                        ë°©ë¬¸í•œ ê³³ê³¼ ê°€ê³  ì‹¶ì€ ê³³ì„ ë§ˆì»¤ë¡œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                    <div class="mt-8 p-4 bg-blue-50 rounded-lg">
                        <p class="text-blue-800 text-sm">
                            ğŸ’¡ ì§€ë„ë¥¼ í™•ëŒ€/ì¶•ì†Œí•˜ê³  ë“œë˜ê·¸í•˜ì—¬ ì›í•˜ëŠ” ì§€ì—­ì„ íƒìƒ‰í•´ë³´ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ëŒ€ì‹œë³´ë“œ ì„¹ì…˜ -->
        <section id="dashboard" class="content-section hidden">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-6">ğŸ“Š</div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">ëŒ€ì‹œë³´ë“œ</h1>
                    <p class="text-gray-600 text-lg leading-relaxed max-w-2xl mx-auto">
                        ì—¬í–‰ í†µê³„ì™€ ë¶„ì„ ë°ì´í„°ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”. 
                        ë°©ë¬¸í•œ êµ­ê°€ ìˆ˜, ì´ ì—¬í–‰ ê±°ë¦¬, ì†Œìš”ëœ ì‹œê°„ ë“± 
                        ë‹¤ì–‘í•œ ì—¬í–‰ ë°ì´í„°ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
                
                <!-- í†µê³„ ì¹´ë“œë“¤ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-blue-50 rounded-xl p-6 text-center">
                        <div class="text-3xl font-bold text-blue-600 mb-2" id="total-countries">0</div>
                        <div class="text-blue-800 font-medium">ë°©ë¬¸ êµ­ê°€</div>
                    </div>
                    <div class="bg-green-50 rounded-xl p-6 text-center">
                        <div class="text-3xl font-bold text-green-600 mb-2" id="total-cities">0</div>
                        <div class="text-green-800 font-medium">ë°©ë¬¸ ë„ì‹œ</div>
                    </div>
                    <div class="bg-purple-50 rounded-xl p-6 text-center">
                        <div class="text-3xl font-bold text-purple-600 mb-2" id="total-days">0</div>
                        <div class="text-purple-800 font-medium">ì´ ì²´ë¥˜ì¼</div>
                    </div>
                </div>
                
                <!-- ì¶”ê°€ í†µê³„ -->
                <div class="bg-gray-50 rounded-xl p-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">ì—¬í–‰ ìš”ì•½</h3>
                    <div id="travel-summary" class="text-gray-600">
                        <!-- ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìš”ì•½ ì •ë³´ê°€ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- íƒ€ì„ë¼ì¸ ì„¹ì…˜ -->
        <section id="timeline" class="content-section hidden">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-6">â°</div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">íƒ€ì„ë¼ì¸</h1>
                    <p class="text-gray-600 text-lg leading-relaxed max-w-2xl mx-auto">
                        ì—¬í–‰ ì¼ì •ì„ ì‹œê°„ìˆœìœ¼ë¡œ ì •ë¦¬í•˜ê³  ê´€ë¦¬í•˜ì„¸ìš”. 
                        ê° ì—¬í–‰ì˜ ì‹œì‘ê³¼ ë, ì£¼ìš” ì¼ì •ë“¤ì„ íƒ€ì„ë¼ì¸ í˜•íƒœë¡œ 
                        ì‹œê°í™”í•˜ì—¬ ì „ì²´ ì—¬í–‰ íë¦„ì„ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
                
                <!-- íƒ€ì„ë¼ì¸ ëª©ë¡ -->
                <div id="timeline-list" class="space-y-4">
                    <!-- ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ íƒ€ì„ë¼ì¸ ì¹´ë“œë“¤ì´ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                </div>
                
                <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ -->
                <div id="timeline-empty" class="text-center py-12">
                    <div class="text-4xl mb-4">ğŸ“</div>
                    <p class="text-gray-500 text-lg">ì•„ì§ ë“±ë¡ëœ ì—¬í–‰ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <p class="text-gray-400 text-sm mt-2">ìš°ì¸¡ í•˜ë‹¨ì˜ + ë²„íŠ¼ì„ ëˆŒëŸ¬ ì²« ì—¬í–‰ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
                </div>
            </div>
        </section>

        <!-- ìº˜ë¦°ë” ì„¹ì…˜ -->
        <section id="calendar" class="content-section hidden">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-6">ğŸ“…</div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">ìº˜ë¦°ë”</h1>
                    <p class="text-gray-600 text-lg leading-relaxed max-w-2xl mx-auto">
                        ì›”ë³„ ìº˜ë¦°ë”ë¡œ ì—¬í–‰ ì¼ì •ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”. 
                        ê° ë‚ ì§œì— ë°©ë¬¸í•œ ê³³ê³¼ ì˜ˆì •ëœ ì—¬í–‰ì„ í‘œì‹œí•˜ì—¬ 
                        ì „ì²´ì ì¸ ì—¬í–‰ ì¼ì •ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                </div>
                
                <!-- ìº˜ë¦°ë” ë„¤ë¹„ê²Œì´ì…˜ -->
                <div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
                    <!-- ì—°ë„/ì›” ì„ íƒ ë“œë¡­ë‹¤ìš´ -->
                    <div class="flex items-center gap-3">
                        <select id="year-select" class="px-3 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors">
                            <!-- ì—°ë„ ì˜µì…˜ë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </select>
                        <span class="text-gray-600 font-medium">ë…„</span>
                        <select id="month-select" class="px-3 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors">
                            <option value="0">1ì›”</option>
                            <option value="1">2ì›”</option>
                            <option value="2">3ì›”</option>
                            <option value="3">4ì›”</option>
                            <option value="4">5ì›”</option>
                            <option value="5">6ì›”</option>
                            <option value="6">7ì›”</option>
                            <option value="7">8ì›”</option>
                            <option value="8">9ì›”</option>
                            <option value="9">10ì›”</option>
                            <option value="10">11ì›”</option>
                            <option value="11">12ì›”</option>
                        </select>
                    </div>
                    
                    <!-- í˜„ì¬ ì›” í‘œì‹œ -->
                    <h2 id="current-month" class="text-xl font-semibold text-gray-800">2024ë…„ 1ì›”</h2>
                    
                    <!-- ì´ì „/ë‹¤ìŒ ë²„íŠ¼ -->
                    <div class="flex items-center gap-2">
                        <button id="prev-month" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                            â† ì´ì „
                        </button>
                        <button id="next-month" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors">
                            ë‹¤ìŒ â†’
                        </button>
                    </div>
                </div>
                
                <!-- ìº˜ë¦°ë” í…Œì´ë¸” -->
                <div class="overflow-x-auto">
                    <table id="calendar-table" class="w-full border-collapse">
                        <thead>
                            <tr class="bg-gray-50">
                                <th class="p-3 text-center text-sm font-medium text-gray-600">ì¼</th>
                                <th class="p-3 text-center text-sm font-medium text-gray-600">ì›”</th>
                                <th class="p-3 text-center text-sm font-medium text-gray-600">í™”</th>
                                <th class="p-3 text-center text-sm font-medium text-gray-600">ìˆ˜</th>
                                <th class="p-3 text-center text-sm font-medium text-gray-600">ëª©</th>
                                <th class="p-3 text-center text-sm font-medium text-gray-600">ê¸ˆ</th>
                                <th class="p-3 text-center text-sm font-medium text-gray-600">í† </th>
                            </tr>
                        </thead>
                        <tbody id="calendar-body">
                            <!-- ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìº˜ë¦°ë”ê°€ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
                
                <!-- ë¹ˆ ìƒíƒœ ë©”ì‹œì§€ -->
                <div id="calendar-empty" class="text-center py-12">
                    <div class="text-4xl mb-4">ğŸ“</div>
                    <p class="text-gray-500 text-lg">ì•„ì§ ë“±ë¡ëœ ì—¬í–‰ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    <p class="text-gray-400 text-sm mt-2">ìš°ì¸¡ í•˜ë‹¨ì˜ + ë²„íŠ¼ì„ ëˆŒëŸ¬ ì²« ì—¬í–‰ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
                </div>
            </div>
        </section>

        <!-- ì„¤ì • ì„¹ì…˜ -->
        <section id="settings" class="content-section hidden">
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
                <div class="text-center mb-8">
                    <div class="text-6xl mb-6">âš™ï¸</div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">ì„¤ì •</h1>
                    <p class="text-gray-600 text-lg leading-relaxed max-w-2xl mx-auto">
                        ì•± ì„¤ì •ê³¼ ì‚¬ìš©ì ì •ë³´ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”. 
                        í…Œë§ˆ ë³€ê²½, ì–¸ì–´ ì„¤ì •, ê³„ì • ê´€ë¦¬ ë“± 
                        ë‹¤ì–‘í•œ ì„¤ì • ì˜µì…˜ì„ ì œê³µí•©ë‹ˆë‹¤.
                    </p>
                </div>
                
                <!-- ì„¤ì • ì¹´í…Œê³ ë¦¬ë“¤ -->
                <div class="space-y-6">
                    <!-- ê³„ì • ì„¤ì • -->
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ê³„ì • ì„¤ì •</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-700">ë¡œê·¸ì¸ ìƒíƒœ</p>
                                    <p class="text-sm text-gray-500" id="login-status">ë¡œê·¸ì¸ë˜ì§€ ì•ŠìŒ</p>
                                </div>
                                <button id="demo-login-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                    ë°ëª¨ ë¡œê·¸ì¸
                                </button>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-700">ì‚¬ìš©ì ë°ì´í„°</p>
                                    <p class="text-sm text-gray-500">í˜„ì¬ ì €ì¥ëœ ì—¬í–‰ ë°ì´í„°</p>
                                </div>
                                <button id="export-data-btn" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                                    ë°ì´í„° ë‚´ë³´ë‚´ê¸°
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ì•± ì„¤ì • -->
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ì•± ì„¤ì •</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-700">ë‹¤í¬ ëª¨ë“œ</p>
                                    <p class="text-sm text-gray-500">ì–´ë‘ìš´ í…Œë§ˆë¡œ ë³€ê²½</p>
                                </div>
                                <button id="dark-mode-toggle" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                                    ì¤€ë¹„ ì¤‘
                                </button>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-700">ì–¸ì–´ ì„¤ì •</p>
                                    <p class="text-sm text-gray-500">í•œêµ­ì–´ / English</p>
                                </div>
                                <button id="language-toggle" class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                                    ì¤€ë¹„ ì¤‘
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ë°ì´í„° ê´€ë¦¬ -->
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ë°ì´í„° ê´€ë¦¬</h3>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-700">ë°ì´í„° ë°±ì—…</p>
                                    <p class="text-sm text-gray-500">ì—¬í–‰ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë°±ì—…</p>
                                </div>
                                <button id="backup-data-btn" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                    ë°±ì—…
                                </button>
                            </div>
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="font-medium text-gray-700">ë°ì´í„° ì´ˆê¸°í™”</p>
                                    <p class="text-sm text-gray-500">ëª¨ë“  ì—¬í–‰ ë°ì´í„° ì‚­ì œ</p>
                                </div>
                                <button id="reset-data-btn" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">
                                    ì´ˆê¸°í™”
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- ì •ë³´ -->
                    <div class="bg-gray-50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">ì •ë³´</h3>
                        <div class="space-y-2 text-sm text-gray-600">
                            <p><strong>ì•± ë²„ì „:</strong> 1.0.0</p>
                            <p><strong>ê°œë°œì:</strong> ì—¬í–‰ ì•± íŒ€</p>
                            <p><strong>ì§€ì›:</strong> í–¥í›„ Firebase Auth ë˜ëŠ” Supabase Auth ì—°ë™ ì˜ˆì •</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- í”Œë¡œíŒ… + ë²„íŠ¼ -->
    <button id="floating-btn" class="fixed bottom-6 right-6 w-14 h-14 bg-blue-500 hover:bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-110 z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
    </button>

    <!-- ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <!-- ëª¨ë‹¬ ì°½ -->
        <div class="bg-white rounded-xl shadow-xl w-11/12 max-w-md max-h-[90vh] overflow-y-auto">
            <!-- ëª¨ë‹¬ í—¤ë” -->
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h2 class="text-xl font-bold text-gray-800">ìƒˆ ì—¬í–‰ ì¶”ê°€</h2>
                <button id="close-modal" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- ëª¨ë‹¬ ë‚´ìš© -->
            <form id="travel-form" class="p-6 space-y-4">
                <!-- êµ­ê°€ ì„ íƒ -->
                <div class="relative">
                    <label for="country-input" class="block text-sm font-medium text-gray-700 mb-2">êµ­ê°€ *</label>
                    <input 
                        type="text" 
                        id="country-input" 
                        name="country" 
                        required 
                        placeholder="êµ­ê°€ëª…ì„ ì…ë ¥í•˜ê±°ë‚˜ ì„ íƒí•˜ì„¸ìš”" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        autocomplete="off"
                    >
                    <input type="hidden" id="country-code" name="countryCode">
                    <input type="hidden" id="country-label" name="countryLabel">
                    
                    <!-- êµ­ê°€ ë“œë¡­ë‹¤ìš´ ëª©ë¡ -->
                    <ul id="country-dropdown" class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto hidden">
                        <!-- ì—¬ê¸°ì— í•„í„°ë§ëœ êµ­ê°€ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </ul>
                </div>

                <!-- ë„ì‹œ ì…ë ¥ -->
                <div class="relative">
                    <label for="city-input" class="block text-sm font-medium text-gray-700 mb-2">ë„ì‹œ *</label>
                    <input 
                        type="text" 
                        id="city-input" 
                        name="city" 
                        required 
                        placeholder="êµ­ê°€ë¥¼ ë¨¼ì € ì„ íƒí•œ í›„ ë„ì‹œëª…ì„ ì…ë ¥í•˜ì„¸ìš”" 
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        autocomplete="off"
                        disabled
                    >
                    <input type="hidden" id="city-name" name="cityName">
                    
                    <!-- ë„ì‹œ ë“œë¡­ë‹¤ìš´ ëª©ë¡ -->
                    <ul id="city-dropdown" class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto hidden">
                        <!-- ì—¬ê¸°ì— í•„í„°ë§ëœ ë„ì‹œ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
                    </ul>
                </div>

                <!-- ì²´ë¥˜ ì‹œì‘ì¼ -->
                <div>
                    <label for="start-date" class="block text-sm font-medium text-gray-700 mb-2">ì²´ë¥˜ ì‹œì‘ì¼ *</label>
                    <input type="date" id="start-date" name="startDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>

                <!-- ì²´ë¥˜ ì¢…ë£Œì¼ -->
                <div>
                    <label for="end-date" class="block text-sm font-medium text-gray-700 mb-2">ì²´ë¥˜ ì¢…ë£Œì¼ *</label>
                    <input type="date" id="end-date" name="endDate" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>

                <!-- ì²´ë¥˜ ëª©ì  -->
                <div>
                    <label for="purpose" class="block text-sm font-medium text-gray-700 mb-2">ì²´ë¥˜ ëª©ì  *</label>
                    <select id="purpose" name="purpose" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <option value="">ëª©ì ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="travel">ì—¬í–‰</option>
                        <option value="business">ì¶œì¥</option>
                        <option value="study">ìœ í•™</option>
                        <option value="working-holiday">ì›Œí‚¹ í™€ë¦¬ë°ì´</option>
                        <option value="family-visit">ê°€ì¡± ë°©ë¬¸</option>
                        <option value="dispatch">íŒŒê²¬</option>
                        <option value="exchange">êµí™˜í•™ìƒ</option>
                        <option value="volunteer">ë´‰ì‚¬í™œë™</option>
                        <option value="medical">ì˜ë£Œ</option>
                        <option value="language">ì–´í•™ ì—°ìˆ˜</option>
                        <option value="transit">ë¹„í–‰ ê²½ìœ </option>
                    </select>
                </div>

                <!-- ë©”ëª¨ -->
                <div>
                    <label for="memo" class="block text-sm font-medium text-gray-700 mb-2">ë©”ëª¨</label>
                    <textarea id="memo" name="memo" rows="3" placeholder="ì¶”ê°€ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"></textarea>
                </div>

                <!-- ì œì¶œ ë²„íŠ¼ -->
                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancel-btn" class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                        ì·¨ì†Œ
                    </button>
                    <button type="submit" class="flex-1 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors">
                        ì¶”ê°€
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let entries = [];
        let currentDate = new Date();
        
        // ì‚¬ìš©ì ê´€ë ¨ ë³€ìˆ˜ë“¤
        let currentUser = {
            id: null,
            username: null,
            isLoggedIn: false
        };
        
        // ìˆ˜ì • ëª¨ë“œ ë³€ìˆ˜
        let isEditMode = false;
        let editingEntryId = null;
        
        // êµ­ê°€ ë°ì´í„° (code, label, aliases, enLabel êµ¬ì¡°)
        const countries = [
            { code: 'KR', label: 'ëŒ€í•œë¯¼êµ­', enLabel: 'South Korea', aliases: ['Korea', 'South Korea', 'í•œêµ­', 'ëŒ€í•œë¯¼êµ­', 'Republic of Korea'] },
            { code: 'JP', label: 'ì¼ë³¸', enLabel: 'Japan', aliases: ['Japan', 'ì¼ë³¸', 'Nippon'] },
            { code: 'CN', label: 'ì¤‘êµ­', enLabel: 'China', aliases: ['China', 'ì¤‘êµ­', 'People\'s Republic of China'] },
            { code: 'US', label: 'ë¯¸êµ­', enLabel: 'United States', aliases: ['USA', 'United States', 'ë¯¸êµ­', 'America'] },
            { code: 'GB', label: 'ì˜êµ­', enLabel: 'United Kingdom', aliases: ['UK', 'United Kingdom', 'ì˜êµ­', 'Great Britain'] },
            { code: 'FR', label: 'í”„ë‘ìŠ¤', enLabel: 'France', aliases: ['France', 'í”„ë‘ìŠ¤'] },
            { code: 'DE', label: 'ë…ì¼', enLabel: 'Germany', aliases: ['Germany', 'ë…ì¼', 'Deutschland'] },
            { code: 'IT', label: 'ì´íƒˆë¦¬ì•„', enLabel: 'Italy', aliases: ['Italy', 'ì´íƒˆë¦¬ì•„'] },
            { code: 'ES', label: 'ìŠ¤í˜ì¸', enLabel: 'Spain', aliases: ['Spain', 'ìŠ¤í˜ì¸'] },
            { code: 'AU', label: 'í˜¸ì£¼', enLabel: 'Australia', aliases: ['Australia', 'í˜¸ì£¼'] },
            { code: 'CA', label: 'ìºë‚˜ë‹¤', enLabel: 'Canada', aliases: ['Canada', 'ìºë‚˜ë‹¤'] },
            { code: 'SG', label: 'ì‹±ê°€í¬ë¥´', enLabel: 'Singapore', aliases: ['Singapore', 'ì‹±ê°€í¬ë¥´'] },
            { code: 'TH', label: 'íƒœêµ­', enLabel: 'Thailand', aliases: ['Thailand', 'íƒœêµ­'] },
            { code: 'VN', label: 'ë² íŠ¸ë‚¨', enLabel: 'Vietnam', aliases: ['Vietnam', 'ë² íŠ¸ë‚¨'] },
            { code: 'TW', label: 'ëŒ€ë§Œ', enLabel: 'Taiwan', aliases: ['Taiwan', 'ëŒ€ë§Œ'] },
            { code: 'HK', label: 'í™ì½©', enLabel: 'Hong Kong', aliases: ['Hong Kong', 'í™ì½©'] },
            { code: 'MY', label: 'ë§ë ˆì´ì‹œì•„', enLabel: 'Malaysia', aliases: ['Malaysia', 'ë§ë ˆì´ì‹œì•„'] },
            { code: 'ID', label: 'ì¸ë„ë„¤ì‹œì•„', enLabel: 'Indonesia', aliases: ['Indonesia', 'ì¸ë„ë„¤ì‹œì•„'] },
            { code: 'PH', label: 'í•„ë¦¬í•€', enLabel: 'Philippines', aliases: ['Philippines', 'í•„ë¦¬í•€'] },
            { code: 'IN', label: 'ì¸ë„', enLabel: 'India', aliases: ['India', 'ì¸ë„'] },
            { code: 'BR', label: 'ë¸Œë¼ì§ˆ', enLabel: 'Brazil', aliases: ['Brazil', 'ë¸Œë¼ì§ˆ'] },
            { code: 'MX', label: 'ë©•ì‹œì½”', enLabel: 'Mexico', aliases: ['Mexico', 'ë©•ì‹œì½”'] },
            { code: 'AR', label: 'ì•„ë¥´í—¨í‹°ë‚˜', enLabel: 'Argentina', aliases: ['Argentina', 'ì•„ë¥´í—¨í‹°ë‚˜'] },
            { code: 'CL', label: 'ì¹ ë ˆ', enLabel: 'Chile', aliases: ['Chile', 'ì¹ ë ˆ'] },
            { code: 'PE', label: 'í˜ë£¨', enLabel: 'Peru', aliases: ['Peru', 'í˜ë£¨'] },
            { code: 'CO', label: 'ì½œë¡¬ë¹„ì•„', enLabel: 'Colombia', aliases: ['Colombia', 'ì½œë¡¬ë¹„ì•„'] },
            { code: 'ZA', label: 'ë‚¨ì•„í”„ë¦¬ì¹´ê³µí™”êµ­', enLabel: 'South Africa', aliases: ['South Africa', 'ë‚¨ì•„í”„ë¦¬ì¹´', 'SA'] },
            { code: 'EG', label: 'ì´ì§‘íŠ¸', enLabel: 'Egypt', aliases: ['Egypt', 'ì´ì§‘íŠ¸'] },
            { code: 'MA', label: 'ëª¨ë¡œì½”', enLabel: 'Morocco', aliases: ['Morocco', 'ëª¨ë¡œì½”'] },
            { code: 'TR', label: 'í„°í‚¤', enLabel: 'Turkey', aliases: ['Turkey', 'í„°í‚¤'] },
            { code: 'RU', label: 'ëŸ¬ì‹œì•„', enLabel: 'Russia', aliases: ['Russia', 'ëŸ¬ì‹œì•„'] },
            { code: 'UA', label: 'ìš°í¬ë¼ì´ë‚˜', enLabel: 'Ukraine', aliases: ['Ukraine', 'ìš°í¬ë¼ì´ë‚˜'] },
            { code: 'PL', label: 'í´ë€ë“œ', enLabel: 'Poland', aliases: ['Poland', 'í´ë€ë“œ'] },
            { code: 'CZ', label: 'ì²´ì½”', enLabel: 'Czech Republic', aliases: ['Czech Republic', 'ì²´ì½”', 'Czechia'] },
            { code: 'HU', label: 'í—ê°€ë¦¬', enLabel: 'Hungary', aliases: ['Hungary', 'í—ê°€ë¦¬'] },
            { code: 'AT', label: 'ì˜¤ìŠ¤íŠ¸ë¦¬ì•„', enLabel: 'Austria', aliases: ['Austria', 'ì˜¤ìŠ¤íŠ¸ë¦¬ì•„'] },
            { code: 'CH', label: 'ìŠ¤ìœ„ìŠ¤', enLabel: 'Switzerland', aliases: ['Switzerland', 'ìŠ¤ìœ„ìŠ¤'] },
            { code: 'NL', label: 'ë„¤ëœë€ë“œ', enLabel: 'Netherlands', aliases: ['Netherlands', 'ë„¤ëœë€ë“œ', 'Holland'] },
            { code: 'BE', label: 'ë²¨ê¸°ì—', enLabel: 'Belgium', aliases: ['Belgium', 'ë²¨ê¸°ì—'] },
            { code: 'SE', label: 'ìŠ¤ì›¨ë´', enLabel: 'Sweden', aliases: ['Sweden', 'ìŠ¤ì›¨ë´'] },
            { code: 'NO', label: 'ë…¸ë¥´ì›¨ì´', enLabel: 'Norway', aliases: ['Norway', 'ë…¸ë¥´ì›¨ì´'] },
            { code: 'DK', label: 'ë´ë§ˆí¬', enLabel: 'Denmark', aliases: ['Denmark', 'ë´ë§ˆí¬'] },
            { code: 'FI', label: 'í•€ë€ë“œ', enLabel: 'Finland', aliases: ['Finland', 'í•€ë€ë“œ'] },
            { code: 'IE', label: 'ì•„ì¼ëœë“œ', enLabel: 'Ireland', aliases: ['Ireland', 'ì•„ì¼ëœë“œ'] },
            { code: 'PT', label: 'í¬ë¥´íˆ¬ê°ˆ', enLabel: 'Portugal', aliases: ['Portugal', 'í¬ë¥´íˆ¬ê°ˆ'] },
            { code: 'GR', label: 'ê·¸ë¦¬ìŠ¤', enLabel: 'Greece', aliases: ['Greece', 'ê·¸ë¦¬ìŠ¤'] },
            { code: 'HR', label: 'í¬ë¡œì•„í‹°ì•„', enLabel: 'Croatia', aliases: ['Croatia', 'í¬ë¡œì•„í‹°ì•„'] },
            { code: 'SI', label: 'ìŠ¬ë¡œë² ë‹ˆì•„', enLabel: 'Slovenia', aliases: ['Slovenia', 'ìŠ¬ë¡œë² ë‹ˆì•„'] },
            { code: 'SK', label: 'ìŠ¬ë¡œë°”í‚¤ì•„', enLabel: 'Slovakia', aliases: ['Slovakia', 'ìŠ¬ë¡œë°”í‚¤ì•„'] },
            { code: 'RO', label: 'ë£¨ë§ˆë‹ˆì•„', enLabel: 'Romania', aliases: ['Romania', 'ë£¨ë§ˆë‹ˆì•„'] },
            { code: 'BG', label: 'ë¶ˆê°€ë¦¬ì•„', enLabel: 'Bulgaria', aliases: ['Bulgaria', 'ë¶ˆê°€ë¦¬ì•„'] },
            { code: 'RS', label: 'ì„¸ë¥´ë¹„ì•„', enLabel: 'Serbia', aliases: ['Serbia', 'ì„¸ë¥´ë¹„ì•„'] },
            { code: 'ME', label: 'ëª¬í…Œë„¤ê·¸ë¡œ', enLabel: 'Montenegro', aliases: ['Montenegro', 'ëª¬í…Œë„¤ê·¸ë¡œ'] },
            { code: 'MK', label: 'ë¶ë§ˆì¼€ë„ë‹ˆì•„', enLabel: 'North Macedonia', aliases: ['North Macedonia', 'ë¶ë§ˆì¼€ë„ë‹ˆì•„', 'Macedonia'] },
            { code: 'AL', label: 'ì•Œë°”ë‹ˆì•„', enLabel: 'Albania', aliases: ['Albania', 'ì•Œë°”ë‹ˆì•„'] },
            { code: 'BA', label: 'ë³´ìŠ¤ë‹ˆì•„í—¤ë¥´ì²´ê³ ë¹„ë‚˜', enLabel: 'Bosnia and Herzegovina', aliases: ['Bosnia and Herzegovina', 'ë³´ìŠ¤ë‹ˆì•„', 'Bosnia'] },
            { code: 'XK', label: 'ì½”ì†Œë³´', enLabel: 'Kosovo', aliases: ['Kosovo', 'ì½”ì†Œë³´'] },
            { code: 'LV', label: 'ë¼íŠ¸ë¹„ì•„', enLabel: 'Latvia', aliases: ['Latvia', 'ë¼íŠ¸ë¹„ì•„'] },
            { code: 'LT', label: 'ë¦¬íˆ¬ì•„ë‹ˆì•„', enLabel: 'Lithuania', aliases: ['Lithuania', 'ë¦¬íˆ¬ì•„ë‹ˆì•„'] },
            { code: 'EE', label: 'ì—ìŠ¤í† ë‹ˆì•„', enLabel: 'Estonia', aliases: ['Estonia', 'ì—ìŠ¤í† ë‹ˆì•„'] },
            { code: 'IS', label: 'ì•„ì´ìŠ¬ë€ë“œ', enLabel: 'Iceland', aliases: ['Iceland', 'ì•„ì´ìŠ¬ë€ë“œ'] },
            { code: 'LU', label: 'ë£©ì…ˆë¶€ë¥´í¬', enLabel: 'Luxembourg', aliases: ['Luxembourg', 'ë£©ì…ˆë¶€ë¥´í¬'] },
            { code: 'LI', label: 'ë¦¬íˆí…ìŠˆíƒ€ì¸', enLabel: 'Liechtenstein', aliases: ['Liechtenstein', 'ë¦¬íˆí…ìŠˆíƒ€ì¸'] },
            { code: 'MC', label: 'ëª¨ë‚˜ì½”', enLabel: 'Monaco', aliases: ['Monaco', 'ëª¨ë‚˜ì½”'] },
            { code: 'SM', label: 'ì‚°ë§ˆë¦¬ë…¸', enLabel: 'San Marino', aliases: ['San Marino', 'ì‚°ë§ˆë¦¬ë…¸'] },
            { code: 'VA', label: 'ë°”í‹°ì¹¸', enLabel: 'Vatican City', aliases: ['Vatican City', 'ë°”í‹°ì¹¸', 'Holy See'] },
            { code: 'AD', label: 'ì•ˆë„ë¼', enLabel: 'Andorra', aliases: ['Andorra', 'ì•ˆë„ë¼'] },
            { code: 'MT', label: 'ëª°íƒ€', enLabel: 'Malta', aliases: ['Malta', 'ëª°íƒ€'] },
            { code: 'CY', label: 'í‚¤í”„ë¡œìŠ¤', enLabel: 'Cyprus', aliases: ['Cyprus', 'í‚¤í”„ë¡œìŠ¤'] },
            { code: 'GI', label: 'ì§€ë¸Œë¡¤í„°', enLabel: 'Gibraltar', aliases: ['Gibraltar', 'ì§€ë¸Œë¡¤í„°'] },
            { code: 'IM', label: 'ë§¨ì„¬', enLabel: 'Isle of Man', aliases: ['Isle of Man', 'ë§¨ì„¬'] },
            { code: 'JE', label: 'ì €ì§€', enLabel: 'Jersey', aliases: ['Jersey', 'ì €ì§€'] },
            { code: 'GG', label: 'ê±´ì§€', enLabel: 'Guernsey', aliases: ['Guernsey', 'ê±´ì§€'] },
            { code: 'FO', label: 'í˜ë¡œì œë„', enLabel: 'Faroe Islands', aliases: ['Faroe Islands', 'í˜ë¡œì œë„'] },
            { code: 'GL', label: 'ê·¸ë¦°ë€ë“œ', enLabel: 'Greenland', aliases: ['Greenland', 'ê·¸ë¦°ë€ë“œ'] },
            { code: 'AX', label: 'ì˜¬ë€ë“œì œë„', enLabel: 'Ã…land Islands', aliases: ['Ã…land Islands', 'ì˜¬ë€ë“œì œë„'] },
            { code: 'SJ', label: 'ìŠ¤ë°œë°”ë¥´ì œë„', enLabel: 'Svalbard and Jan Mayen', aliases: ['Svalbard and Jan Mayen', 'ìŠ¤ë°œë°”ë¥´ì œë„'] },
            { code: 'BV', label: 'ë¶€ë² ì„¬', enLabel: 'Bouvet Island', aliases: ['Bouvet Island', 'ë¶€ë² ì„¬'] },
            { code: 'TF', label: 'í”„ë‘ìŠ¤ë ¹ë‚¨ë¶€ì§€ì—­', enLabel: 'French Southern Territories', aliases: ['French Southern Territories', 'í”„ë‘ìŠ¤ë ¹ë‚¨ë¶€ì§€ì—­'] },
            { code: 'HM', label: 'í—ˆë“œë§¥ë„ë„ë“œì œë„', enLabel: 'Heard Island and McDonald Islands', aliases: ['Heard Island and McDonald Islands', 'í—ˆë“œë§¥ë„ë„ë“œì œë„'] },
            { code: 'AQ', label: 'ë‚¨ê·¹', enLabel: 'Antarctica', aliases: ['Antarctica', 'ë‚¨ê·¹'] },
            { code: 'IO', label: 'ì˜êµ­ë ¹ì¸ë„ì–‘ì§€ì—­', enLabel: 'British Indian Ocean Territory', aliases: ['British Indian Ocean Territory', 'ì˜êµ­ë ¹ì¸ë„ì–‘ì§€ì—­'] },
            { code: 'CX', label: 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ì„¬', enLabel: 'Christmas Island', aliases: ['Christmas Island', 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ì„¬'] },
            { code: 'CC', label: 'ì½”ì½”ìŠ¤ì œë„', enLabel: 'Cocos (Keeling) Islands', aliases: ['Cocos (Keeling) Islands', 'ì½”ì½”ìŠ¤ì œë„'] },
            { code: 'NF', label: 'ë…¸í½ì„¬', enLabel: 'Norfolk Island', aliases: ['Norfolk Island', 'ë…¸í½ì„¬'] },
            { code: 'PN', label: 'í•ì¼€ì–¸ì œë„', enLabel: 'Pitcairn', aliases: ['Pitcairn', 'í•ì¼€ì–¸ì œë„'] },
            { code: 'TK', label: 'í† ì¼ˆë¼ìš°', enLabel: 'Tokelau', aliases: ['Tokelau', 'í† ì¼ˆë¼ìš°'] },
            { code: 'NU', label: 'ë‹ˆìš°ì—', enLabel: 'Niue', aliases: ['Niue', 'ë‹ˆìš°ì—'] },
            { code: 'CK', label: 'ì¿¡ì œë„', enLabel: 'Cook Islands', aliases: ['Cook Islands', 'ì¿¡ì œë„'] },
            { code: 'WS', label: 'ì‚¬ëª¨ì•„', enLabel: 'Samoa', aliases: ['Samoa', 'ì‚¬ëª¨ì•„'] },
            { code: 'TO', label: 'í†µê°€', enLabel: 'Tonga', aliases: ['Tonga', 'í†µê°€'] },
            { code: 'FJ', label: 'í”¼ì§€', enLabel: 'Fiji', aliases: ['Fiji', 'í”¼ì§€'] },
            { code: 'VU', label: 'ë°”ëˆ„ì•„íˆ¬', enLabel: 'Vanuatu', aliases: ['Vanuatu', 'ë°”ëˆ„ì•„íˆ¬'] },
            { code: 'NC', label: 'ë‰´ì¹¼ë ˆë„ë‹ˆì•„', enLabel: 'New Caledonia', aliases: ['New Caledonia', 'ë‰´ì¹¼ë ˆë„ë‹ˆì•„'] },
            { code: 'PF', label: 'í”„ë‘ìŠ¤ë ¹í´ë¦¬ë„¤ì‹œì•„', enLabel: 'French Polynesia', aliases: ['French Polynesia', 'í”„ë‘ìŠ¤ë ¹í´ë¦¬ë„¤ì‹œì•„'] },
            { code: 'WF', label: 'ì™ˆë¦¬ìŠ¤í‘¸íˆ¬ë‚˜', enLabel: 'Wallis and Futuna', aliases: ['Wallis and Futuna', 'ì™ˆë¦¬ìŠ¤í‘¸íˆ¬ë‚˜'] },
            { code: 'AS', label: 'ë¯¸êµ­ë ¹ì‚¬ëª¨ì•„', enLabel: 'American Samoa', aliases: ['American Samoa', 'ë¯¸êµ­ë ¹ì‚¬ëª¨ì•„'] },
            { code: 'GU', label: 'ê´Œ', enLabel: 'Guam', aliases: ['Guam', 'ê´Œ'] },
            { code: 'MP', label: 'ë¶ë§ˆë¦¬ì•„ë‚˜ì œë„', enLabel: 'Northern Mariana Islands', aliases: ['Northern Mariana Islands', 'ë¶ë§ˆë¦¬ì•„ë‚˜ì œë„'] },
            { code: 'PW', label: 'íŒ”ë¼ìš°', enLabel: 'Palau', aliases: ['Palau', 'íŒ”ë¼ìš°'] },
            { code: 'FM', label: 'ë¯¸í¬ë¡œë„¤ì‹œì•„', enLabel: 'Micronesia', aliases: ['Micronesia', 'ë¯¸í¬ë¡œë„¤ì‹œì•„'] },
            { code: 'MH', label: 'ë§ˆì…œì œë„', enLabel: 'Marshall Islands', aliases: ['Marshall Islands', 'ë§ˆì…œì œë„'] },
            { code: 'KI', label: 'í‚¤ë¦¬ë°”ì‹œ', enLabel: 'Kiribati', aliases: ['Kiribati', 'í‚¤ë¦¬ë°”ì‹œ'] },
            { code: 'NR', label: 'ë‚˜ìš°ë£¨', enLabel: 'Nauru', aliases: ['Nauru', 'ë‚˜ìš°ë£¨'] },
            { code: 'TV', label: 'íˆ¬ë°œë£¨', enLabel: 'Tuvalu', aliases: ['Tuvalu', 'íˆ¬ë°œë£¨'] },
            { code: 'SB', label: 'ì†”ë¡œëª¬ì œë„', enLabel: 'Solomon Islands', aliases: ['Solomon Islands', 'ì†”ë¡œëª¬ì œë„'] },
            { code: 'PG', label: 'íŒŒí‘¸ì•„ë‰´ê¸°ë‹ˆ', enLabel: 'Papua New Guinea', aliases: ['Papua New Guinea', 'íŒŒí‘¸ì•„ë‰´ê¸°ë‹ˆ'] },
            { code: 'AU', label: 'í˜¸ì£¼', enLabel: 'Australia', aliases: ['Australia', 'í˜¸ì£¼'] },
            { code: 'NZ', label: 'ë‰´ì§ˆëœë“œ', enLabel: 'New Zealand', aliases: ['New Zealand', 'ë‰´ì§ˆëœë“œ'] },
            { code: 'NC', label: 'ë‰´ì¹¼ë ˆë„ë‹ˆì•„', enLabel: 'New Caledonia', aliases: ['New Caledonia', 'ë‰´ì¹¼ë ˆë„ë‹ˆì•„'] },
            { code: 'PF', label: 'í”„ë‘ìŠ¤ë ¹í´ë¦¬ë„¤ì‹œì•„', enLabel: 'French Polynesia', aliases: ['French Polynesia', 'í”„ë‘ìŠ¤ë ¹í´ë¦¬ë„¤ì‹œì•„'] },
            { code: 'WF', label: 'ì™ˆë¦¬ìŠ¤í‘¸íˆ¬ë‚˜', enLabel: 'Wallis and Futuna', aliases: ['Wallis and Futuna', 'ì™ˆë¦¬ìŠ¤í‘¸íˆ¬ë‚˜'] },
            { code: 'AS', label: 'ë¯¸êµ­ë ¹ì‚¬ëª¨ì•„', enLabel: 'American Samoa', aliases: ['American Samoa', 'ë¯¸êµ­ë ¹ì‚¬ëª¨ì•„'] },
            { code: 'GU', label: 'ê´Œ', enLabel: 'Guam', aliases: ['Guam', 'ê´Œ'] },
            { code: 'MP', label: 'ë¶ë§ˆë¦¬ì•„ë‚˜ì œë„', enLabel: 'Northern Mariana Islands', aliases: ['Northern Mariana Islands', 'ë¶ë§ˆë¦¬ì•„ë‚˜ì œë„'] },
            { code: 'PW', label: 'íŒ”ë¼ìš°', enLabel: 'Palau', aliases: ['Palau', 'íŒ”ë¼ìš°'] },
            { code: 'FM', label: 'ë¯¸í¬ë¡œë„¤ì‹œì•„', enLabel: 'Micronesia', aliases: ['Micronesia', 'ë¯¸í¬ë¡œë„¤ì‹œì•„'] },
            { code: 'MH', label: 'ë§ˆì…œì œë„', enLabel: 'Marshall Islands', aliases: ['Marshall Islands', 'ë§ˆì…œì œë„'] },
            { code: 'KI', label: 'í‚¤ë¦¬ë°”ì‹œ', enLabel: 'Kiribati', aliases: ['Kiribati', 'í‚¤ë¦¬ë°”ì‹œ'] },
            { code: 'NR', label: 'ë‚˜ìš°ë£¨', enLabel: 'Nauru', aliases: ['Nauru', 'ë‚˜ìš°ë£¨'] },
            { code: 'TV', label: 'íˆ¬ë°œë£¨', enLabel: 'Tuvalu', aliases: ['Tuvalu', 'íˆ¬ë°œë£¨'] },
            { code: 'SB', label: 'ì†”ë¡œëª¬ì œë„', enLabel: 'Solomon Islands', aliases: ['Solomon Islands', 'ì†”ë¡œëª¬ì œë„'] },
            { code: 'PG', label: 'íŒŒí‘¸ì•„ë‰´ê¸°ë‹ˆ', enLabel: 'Papua New Guinea', aliases: ['Papua New Guinea', 'íŒŒí‘¸ì•„ë‰´ê¸°ë‹ˆ'] }
        ];

        // ëª¨ë‹¬ ê´€ë ¨ ìš”ì†Œë“¤
        const floatingBtn = document.getElementById('floating-btn');
        const modalOverlay = document.getElementById('modal-overlay');
        const closeModal = document.getElementById('close-modal');
        const cancelBtn = document.getElementById('cancel-btn');
        const travelForm = document.getElementById('travel-form');
        
        // êµ­ê°€ ìë™ì™„ì„± ê´€ë ¨ ìš”ì†Œë“¤
        const countryInput = document.getElementById('country-input');
        const countryCode = document.getElementById('country-code');
        const countryLabel = document.getElementById('country-label');
        const countryDropdown = document.getElementById('country-dropdown');
        
        // ë„ì‹œ ìë™ì™„ì„± ê´€ë ¨ ìš”ì†Œë“¤
        const cityInput = document.getElementById('city-input');
        const cityName = document.getElementById('city-name');
        const cityDropdown = document.getElementById('city-dropdown');
        
        // ë„ì‹œ ë°ì´í„° (êµ­ê°€ë³„ ë„ì‹œ ëª©ë¡)
        const cities = {
            'KR': [
                { name: 'ì„œìš¸', enName: 'Seoul', aliases: ['Seoul', 'ì„œìš¸', 'ì„œìš¸íŠ¹ë³„ì‹œ'] },
                { name: 'ë¶€ì‚°', enName: 'Busan', aliases: ['Busan', 'ë¶€ì‚°', 'ë¶€ì‚°ê´‘ì—­ì‹œ'] },
                { name: 'ëŒ€êµ¬', enName: 'Daegu', aliases: ['Daegu', 'ëŒ€êµ¬', 'ëŒ€êµ¬ê´‘ì—­ì‹œ'] },
                { name: 'ì¸ì²œ', enName: 'Incheon', aliases: ['Incheon', 'ì¸ì²œ', 'ì¸ì²œê´‘ì—­ì‹œ'] },
                { name: 'ê´‘ì£¼', enName: 'Gwangju', aliases: ['Gwangju', 'ê´‘ì£¼', 'ê´‘ì£¼ê´‘ì—­ì‹œ'] },
                { name: 'ëŒ€ì „', enName: 'Daejeon', aliases: ['Daejeon', 'ëŒ€ì „', 'ëŒ€ì „ê´‘ì—­ì‹œ'] },
                { name: 'ìš¸ì‚°', enName: 'Ulsan', aliases: ['Ulsan', 'ìš¸ì‚°', 'ìš¸ì‚°ê´‘ì—­ì‹œ'] },
                { name: 'ì œì£¼', enName: 'Jeju', aliases: ['Jeju', 'ì œì£¼', 'ì œì£¼íŠ¹ë³„ìì¹˜ë„'] },
                { name: 'ìˆ˜ì›', enName: 'Suwon', aliases: ['Suwon', 'ìˆ˜ì›', 'ìˆ˜ì›ì‹œ'] },
                { name: 'ê³ ì–‘', enName: 'Goyang', aliases: ['Goyang', 'ê³ ì–‘', 'ê³ ì–‘ì‹œ'] },
                { name: 'ìš©ì¸', enName: 'Yongin', aliases: ['Yongin', 'ìš©ì¸', 'ìš©ì¸ì‹œ'] },
                { name: 'ì°½ì›', enName: 'Changwon', aliases: ['Changwon', 'ì°½ì›', 'ì°½ì›ì‹œ'] },
                { name: 'ì„±ë‚¨', enName: 'Seongnam', aliases: ['Seongnam', 'ì„±ë‚¨', 'ì„±ë‚¨ì‹œ'] },
                { name: 'ë¶€ì²œ', enName: 'Bucheon', aliases: ['Bucheon', 'ë¶€ì²œ', 'ë¶€ì²œì‹œ'] },
                { name: 'ì•ˆì‚°', enName: 'Ansan', aliases: ['Ansan', 'ì•ˆì‚°', 'ì•ˆì‚°ì‹œ'] },
                { name: 'ì „ì£¼', enName: 'Jeonju', aliases: ['Jeonju', 'ì „ì£¼', 'ì „ì£¼ì‹œ'] },
                { name: 'ì²œì•ˆ', enName: 'Cheonan', aliases: ['Cheonan', 'ì²œì•ˆ', 'ì²œì•ˆì‹œ'] },
                { name: 'ì²­ì£¼', enName: 'Cheongju', aliases: ['Cheongju', 'ì²­ì£¼', 'ì²­ì£¼ì‹œ'] },
                { name: 'í¬í•­', enName: 'Pohang', aliases: ['Pohang', 'í¬í•­', 'í¬í•­ì‹œ'] },
                { name: 'ì•ˆì–‘', enName: 'Anyang', aliases: ['Anyang', 'ì•ˆì–‘', 'ì•ˆì–‘ì‹œ'] }
            ],
            'JP': [
                { name: 'ë„ì¿„', enName: 'Tokyo', aliases: ['Tokyo', 'ë„ì¿„', 'æ±äº¬'] },
                { name: 'ì˜¤ì‚¬ì¹´', enName: 'Osaka', aliases: ['Osaka', 'ì˜¤ì‚¬ì¹´', 'å¤§é˜ª'] },
                { name: 'êµí† ', enName: 'Kyoto', aliases: ['Kyoto', 'êµí† ', 'äº¬éƒ½'] },
                { name: 'ìš”ì½”í•˜ë§ˆ', enName: 'Yokohama', aliases: ['Yokohama', 'ìš”ì½”í•˜ë§ˆ', 'æ¨ªæµœ'] },
                { name: 'ë‚˜ê³ ì•¼', enName: 'Nagoya', aliases: ['Nagoya', 'ë‚˜ê³ ì•¼', 'åå¤å±‹'] },
                { name: 'ì‚¿í¬ë¡œ', enName: 'Sapporo', aliases: ['Sapporo', 'ì‚¿í¬ë¡œ', 'æœ­å¹Œ'] },
                { name: 'ê³ ë² ', enName: 'Kobe', aliases: ['Kobe', 'ê³ ë² ', 'ç¥æˆ¸'] },
                { name: 'í›„ì¿ ì˜¤ì¹´', enName: 'Fukuoka', aliases: ['Fukuoka', 'í›„ì¿ ì˜¤ì¹´', 'ç¦å²¡'] },
                { name: 'ê°€ì™€ì‚¬í‚¤', enName: 'Kawasaki', aliases: ['Kawasaki', 'ê°€ì™€ì‚¬í‚¤', 'å·å´'] },
                { name: 'íˆë¡œì‹œë§ˆ', enName: 'Hiroshima', aliases: ['Hiroshima', 'íˆë¡œì‹œë§ˆ', 'åºƒå³¶'] },
                { name: 'ì„¼ë‹¤ì´', enName: 'Sendai', aliases: ['Sendai', 'ì„¼ë‹¤ì´', 'ä»™å°'] },
                { name: 'ì§€ë°”', enName: 'Chiba', aliases: ['Chiba', 'ì§€ë°”', 'åƒè‘‰'] },
                { name: 'ê¸°íƒ€íìŠˆ', enName: 'Kitakyushu', aliases: ['Kitakyushu', 'ê¸°íƒ€íìŠˆ', 'åŒ—ä¹å·'] },
                { name: 'ì‚¬ì¹´ì´', enName: 'Sakai', aliases: ['Sakai', 'ì‚¬ì¹´ì´', 'å º'] },
                { name: 'ë‹ˆê°€íƒ€', enName: 'Niigata', aliases: ['Niigata', 'ë‹ˆê°€íƒ€', 'æ–°æ½Ÿ'] },
                { name: 'í•˜ë§ˆë§ˆì“°', enName: 'Hamamatsu', aliases: ['Hamamatsu', 'í•˜ë§ˆë§ˆì“°', 'æµœæ¾'] },
                { name: 'êµ¬ë§ˆëª¨í† ', enName: 'Kumamoto', aliases: ['Kumamoto', 'êµ¬ë§ˆëª¨í† ', 'ç†Šæœ¬'] },
                { name: 'ì‚¬ê°€ë¯¸í•˜ë¼', enName: 'Sagamihara', aliases: ['Sagamihara', 'ì‚¬ê°€ë¯¸í•˜ë¼', 'ç›¸æ¨¡åŸ'] },
                { name: 'ì˜¤ì¹´ì•¼ë§ˆ', enName: 'Okayama', aliases: ['Okayama', 'ì˜¤ì¹´ì•¼ë§ˆ', 'å²¡å±±'] },
                { name: 'ì‹œì¦ˆì˜¤ì¹´', enName: 'Shizuoka', aliases: ['Shizuoka', 'ì‹œì¦ˆì˜¤ì¹´', 'é™å²¡'] },
                { name: 'íˆë©”ì§€', enName: 'Himeji', aliases: ['Himeji', 'íˆë©”ì§€', 'å§«è·¯'] }
            ],
            'US': [
                { name: 'ë‰´ìš•', enName: 'New York', aliases: ['New York', 'ë‰´ìš•', 'NYC'] },
                { name: 'ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', enName: 'Los Angeles', aliases: ['Los Angeles', 'ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤', 'LA'] },
                { name: 'ì‹œì¹´ê³ ', enName: 'Chicago', aliases: ['Chicago', 'ì‹œì¹´ê³ '] },
                { name: 'íœ´ìŠ¤í„´', enName: 'Houston', aliases: ['Houston', 'íœ´ìŠ¤í„´'] },
                { name: 'í”¼ë‹‰ìŠ¤', enName: 'Phoenix', aliases: ['Phoenix', 'í”¼ë‹‰ìŠ¤'] },
                { name: 'í•„ë¼ë¸í”¼ì•„', enName: 'Philadelphia', aliases: ['Philadelphia', 'í•„ë¼ë¸í”¼ì•„'] },
                { name: 'ìƒŒì•ˆí† ë‹ˆì˜¤', enName: 'San Antonio', aliases: ['San Antonio', 'ìƒŒì•ˆí† ë‹ˆì˜¤'] },
                { name: 'ìƒŒë””ì—ê³ ', enName: 'San Diego', aliases: ['San Diego', 'ìƒŒë””ì—ê³ '] },
                { name: 'ëŒˆëŸ¬ìŠ¤', enName: 'Dallas', aliases: ['Dallas', 'ëŒˆëŸ¬ìŠ¤'] },
                { name: 'ìƒŒí˜¸ì„¸', enName: 'San Jose', aliases: ['San Jose', 'ìƒŒí˜¸ì„¸'] },
                { name: 'ì˜¤ìŠ¤í‹´', enName: 'Austin', aliases: ['Austin', 'ì˜¤ìŠ¤í‹´'] },
                { name: 'ì­ìŠ¨ë¹Œ', enName: 'Jacksonville', aliases: ['Jacksonville', 'ì­ìŠ¨ë¹Œ'] },
                { name: 'í¬íŠ¸ì›ŒìŠ¤', enName: 'Fort Worth', aliases: ['Fort Worth', 'í¬íŠ¸ì›ŒìŠ¤'] },
                { name: 'ì½œëŸ¼ë²„ìŠ¤', enName: 'Columbus', aliases: ['Columbus', 'ì½œëŸ¼ë²„ìŠ¤'] },
                { name: 'ìƒ¬ëŸ¿', enName: 'Charlotte', aliases: ['Charlotte', 'ìƒ¬ëŸ¿'] },
                { name: 'ìƒŒí”„ë€ì‹œìŠ¤ì½”', enName: 'San Francisco', aliases: ['San Francisco', 'ìƒŒí”„ë€ì‹œìŠ¤ì½”', 'SF'] },
                { name: 'ì¸ë””ì• ë‚˜í´ë¦¬ìŠ¤', enName: 'Indianapolis', aliases: ['Indianapolis', 'ì¸ë””ì• ë‚˜í´ë¦¬ìŠ¤'] },
                { name: 'ì‹œì• í‹€', enName: 'Seattle', aliases: ['Seattle', 'ì‹œì• í‹€'] },
                { name: 'ë´ë²„', enName: 'Denver', aliases: ['Denver', 'ë´ë²„'] },
                { name: 'ì›Œì‹±í„´', enName: 'Washington', aliases: ['Washington', 'ì›Œì‹±í„´', 'DC'] },
                { name: 'ë³´ìŠ¤í„´', enName: 'Boston', aliases: ['Boston', 'ë³´ìŠ¤í„´'] }
            ],
            'GB': [
                { name: 'ëŸ°ë˜', enName: 'London', aliases: ['London', 'ëŸ°ë˜'] },
                { name: 'ë²„ë°ì—„', enName: 'Birmingham', aliases: ['Birmingham', 'ë²„ë°ì—„'] },
                { name: 'ë¦¬ì¦ˆ', enName: 'Leeds', aliases: ['Leeds', 'ë¦¬ì¦ˆ'] },
                { name: 'ê¸€ë˜ìŠ¤ê³ ', enName: 'Glasgow', aliases: ['Glasgow', 'ê¸€ë˜ìŠ¤ê³ '] },
                { name: 'ì…°í•„ë“œ', enName: 'Sheffield', aliases: ['Sheffield', 'ì…°í•„ë“œ'] },
                { name: 'ë¸Œë˜ë“œí¬ë“œ', enName: 'Bradford', aliases: ['Bradford', 'ë¸Œë˜ë“œí¬ë“œ'] },
                { name: 'ì—ë“ ë²„ëŸ¬', enName: 'Edinburgh', aliases: ['Edinburgh', 'ì—ë“ ë²„ëŸ¬'] },
                { name: 'ë¦¬ë²„í’€', enName: 'Liverpool', aliases: ['Liverpool', 'ë¦¬ë²„í’€'] },
                { name: 'ë§¨ì²´ìŠ¤í„°', enName: 'Manchester', aliases: ['Manchester', 'ë§¨ì²´ìŠ¤í„°'] },
                { name: 'ë¸Œë¦¬ìŠ¤í‹€', enName: 'Bristol', aliases: ['Bristol', 'ë¸Œë¦¬ìŠ¤í‹€'] },
                { name: 'ì›¨ì´í¬í•„ë“œ', enName: 'Wakefield', aliases: ['Wakefield', 'ì›¨ì´í¬í•„ë“œ'] },
                { name: 'ì¹´ë””í”„', enName: 'Cardiff', aliases: ['Cardiff', 'ì¹´ë””í”„'] },
                { name: 'ì½”ë²¤íŠ¸ë¦¬', enName: 'Coventry', aliases: ['Coventry', 'ì½”ë²¤íŠ¸ë¦¬'] },
                { name: 'ë ˆìŠ¤í„°', enName: 'Leicester', aliases: ['Leicester', 'ë ˆìŠ¤í„°'] },
                { name: 'ìŠ¤í† í¬ì˜¨íŠ¸ë ŒíŠ¸', enName: 'Stoke-on-Trent', aliases: ['Stoke-on-Trent', 'ìŠ¤í† í¬ì˜¨íŠ¸ë ŒíŠ¸'] },
                { name: 'ìš¸ë²„í–„íŠ¼', enName: 'Wolverhampton', aliases: ['Wolverhampton', 'ìš¸ë²„í–„íŠ¼'] },
                { name: 'ë…¸íŒ…ì—„', enName: 'Nottingham', aliases: ['Nottingham', 'ë…¸íŒ…ì—„'] },
                { name: 'í”Œë¦¬ë¨¸ìŠ¤', enName: 'Plymouth', aliases: ['Plymouth', 'í”Œë¦¬ë¨¸ìŠ¤'] },
                { name: 'ì‚¬ìš°ìƒ˜í”„í„´', enName: 'Southampton', aliases: ['Southampton', 'ì‚¬ìš°ìƒ˜í”„í„´'] },
                { name: 'ë ˆë”©', enName: 'Reading', aliases: ['Reading', 'ë ˆë”©'] },
                { name: 'ë”ë¹„', enName: 'Derby', aliases: ['Derby', 'ë”ë¹„'] }
            ],
            'FR': [
                { name: 'íŒŒë¦¬', enName: 'Paris', aliases: ['Paris', 'íŒŒë¦¬'] },
                { name: 'ë§ˆë¥´ì„¸ìœ ', enName: 'Marseille', aliases: ['Marseille', 'ë§ˆë¥´ì„¸ìœ '] },
                { name: 'ë¦¬ì˜¹', enName: 'Lyon', aliases: ['Lyon', 'ë¦¬ì˜¹'] },
                { name: 'íˆ´ë£¨ì¦ˆ', enName: 'Toulouse', aliases: ['Toulouse', 'íˆ´ë£¨ì¦ˆ'] },
                { name: 'ë‹ˆìŠ¤', enName: 'Nice', aliases: ['Nice', 'ë‹ˆìŠ¤'] },
                { name: 'ë‚­íŠ¸', enName: 'Nantes', aliases: ['Nantes', 'ë‚­íŠ¸'] },
                { name: 'ìŠ¤íŠ¸ë¼ìŠ¤ë¶€ë¥´', enName: 'Strasbourg', aliases: ['Strasbourg', 'ìŠ¤íŠ¸ë¼ìŠ¤ë¶€ë¥´'] },
                { name: 'ëª½í ë¦¬ì—', enName: 'Montpellier', aliases: ['Montpellier', 'ëª½í ë¦¬ì—'] },
                { name: 'ë³´ë¥´ë„', enName: 'Bordeaux', aliases: ['Bordeaux', 'ë³´ë¥´ë„'] },
                { name: 'ë¦´', enName: 'Lille', aliases: ['Lille', 'ë¦´'] },
                { name: 'ë Œ', enName: 'Rennes', aliases: ['Rennes', 'ë Œ'] },
                { name: 'ë¥´ì•„ë¸Œë¥´', enName: 'Le Havre', aliases: ['Le Havre', 'ë¥´ì•„ë¸Œë¥´'] },
                { name: 'ìƒí…Œí‹°ì—”', enName: 'Saint-Ã‰tienne', aliases: ['Saint-Ã‰tienne', 'ìƒí…Œí‹°ì—”'] },
                { name: 'íˆ´ë¡±', enName: 'Toulon', aliases: ['Toulon', 'íˆ´ë¡±'] },
                { name: 'ê·¸ë¥´ë…¸ë¸”', enName: 'Grenoble', aliases: ['Grenoble', 'ê·¸ë¥´ë…¸ë¸”'] },
                { name: 'ë””ì¢…', enName: 'Dijon', aliases: ['Dijon', 'ë””ì¢…'] },
                { name: 'ì•™ì œ', enName: 'Angers', aliases: ['Angers', 'ì•™ì œ'] },
                { name: 'ìƒë“œë‹ˆ', enName: 'Saint-Denis', aliases: ['Saint-Denis', 'ìƒë“œë‹ˆ'] },
                { name: 'ë¹Œë¢°ë°˜', enName: 'Villeurbanne', aliases: ['Villeurbanne', 'ë¹Œë¢°ë°˜'] },
                { name: 'ë¥´ë§', enName: 'Le Mans', aliases: ['Le Mans', 'ë¥´ë§'] },
                { name: 'ì—‘ìƒí”„ë¡œë°©ìŠ¤', enName: 'Aix-en-Provence', aliases: ['Aix-en-Provence', 'ì—‘ìƒí”„ë¡œë°©ìŠ¤'] }
            ],
            'DE': [
                { name: 'ë² ë¥¼ë¦°', enName: 'Berlin', aliases: ['Berlin', 'ë² ë¥¼ë¦°'] },
                { name: 'í•¨ë¶€ë¥´í¬', enName: 'Hamburg', aliases: ['Hamburg', 'í•¨ë¶€ë¥´í¬'] },
                { name: 'ë®Œí—¨', enName: 'Munich', aliases: ['Munich', 'ë®Œí—¨', 'MÃ¼nchen'] },
                { name: 'ì¾°ë¥¸', enName: 'Cologne', aliases: ['Cologne', 'ì¾°ë¥¸', 'KÃ¶ln'] },
                { name: 'í”„ë‘í¬í‘¸ë¥´íŠ¸', enName: 'Frankfurt', aliases: ['Frankfurt', 'í”„ë‘í¬í‘¸ë¥´íŠ¸'] },
                { name: 'ìŠˆíˆ¬íŠ¸ê°€ë¥´íŠ¸', enName: 'Stuttgart', aliases: ['Stuttgart', 'ìŠˆíˆ¬íŠ¸ê°€ë¥´íŠ¸'] },
                { name: 'ë’¤ì…€ë„ë¥´í”„', enName: 'DÃ¼sseldorf', aliases: ['DÃ¼sseldorf', 'ë’¤ì…€ë„ë¥´í”„'] },
                { name: 'ë„ë¥´íŠ¸ë¬¸íŠ¸', enName: 'Dortmund', aliases: ['Dortmund', 'ë„ë¥´íŠ¸ë¬¸íŠ¸'] },
                { name: 'ì—ì„¼', enName: 'Essen', aliases: ['Essen', 'ì—ì„¼'] },
                { name: 'ë¼ì´í”„ì¹˜íˆ', enName: 'Leipzig', aliases: ['Leipzig', 'ë¼ì´í”„ì¹˜íˆ'] },
                { name: 'ë¸Œë ˆë©˜', enName: 'Bremen', aliases: ['Bremen', 'ë¸Œë ˆë©˜'] },
                { name: 'ë“œë ˆìŠ¤ë´', enName: 'Dresden', aliases: ['Dresden', 'ë“œë ˆìŠ¤ë´'] },
                { name: 'í•˜ë…¸ë²„', enName: 'Hanover', aliases: ['Hanover', 'í•˜ë…¸ë²„', 'Hannover'] },
                { name: 'ë‰˜ë¥¸ë² ë¥´í¬', enName: 'Nuremberg', aliases: ['Nuremberg', 'ë‰˜ë¥¸ë² ë¥´í¬', 'NÃ¼rnberg'] },
                { name: 'ë’¤ìŠ¤ë¶€ë¥´í¬', enName: 'Duisburg', aliases: ['Duisburg', 'ë’¤ìŠ¤ë¶€ë¥´í¬'] },
                { name: 'ë³´í›”', enName: 'Bochum', aliases: ['Bochum', 'ë³´í›”'] },
                { name: 'ë¶€í¼íƒˆ', enName: 'Wuppertal', aliases: ['Wuppertal', 'ë¶€í¼íƒˆ'] },
                { name: 'ë¹Œë ˆí íŠ¸', enName: 'Bielefeld', aliases: ['Bielefeld', 'ë¹Œë ˆí íŠ¸'] },
                { name: 'ë³¸', enName: 'Bonn', aliases: ['Bonn', 'ë³¸'] },
                { name: 'ë§Œí•˜ì„', enName: 'Mannheim', aliases: ['Mannheim', 'ë§Œí•˜ì„'] },
                { name: 'ì¹´ë¥¼ìŠ¤ë£¨ì—', enName: 'Karlsruhe', aliases: ['Karlsruhe', 'ì¹´ë¥¼ìŠ¤ë£¨ì—'] }
            ]
        };

        // localStorageì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadEntries() {
            const savedEntries = localStorage.getItem('travelEntries');
            entries = savedEntries ? JSON.parse(savedEntries) : [];
            
            // ê¸°ì¡´ entriesì— IDê°€ ì—†ëŠ” ê²½ìš° ID ì¶”ê°€
            entries.forEach(entry => {
                if (!entry.id) {
                    entry.id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
                }
            });
            
            // IDê°€ ì¶”ê°€ëœ ê²½ìš° localStorage ì—…ë°ì´íŠ¸
            if (savedEntries) {
                saveEntries();
            }
        }

        // localStorageì— ë°ì´í„° ì €ì¥
        function saveEntries() {
            localStorage.setItem('travelEntries', JSON.stringify(entries));
        }
        
        // ì‚¬ìš©ìë³„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° (í–¥í›„ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ ëŒ€ë¹„)
        function loadUserData() {
            if (currentUser.isLoggedIn && currentUser.id) {
                const userDataKey = `user_${currentUser.id}_travelEntries`;
                const savedEntries = localStorage.getItem(userDataKey);
                entries = savedEntries ? JSON.parse(savedEntries) : [];
            } else {
                // í˜„ì¬ëŠ” ê¸°ì¡´ ë°©ì‹ ìœ ì§€ (ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ììš©)
                const savedEntries = localStorage.getItem('travelEntries');
                entries = savedEntries ? JSON.parse(savedEntries) : [];
            }
            
            // ê¸°ì¡´ entriesì— IDê°€ ì—†ëŠ” ê²½ìš° ID ì¶”ê°€
            entries.forEach(entry => {
                if (!entry.id) {
                    entry.id = Date.now().toString() + Math.random().toString(36).substr(2, 9);
                }
            });
            
            // IDê°€ ì¶”ê°€ëœ ê²½ìš° localStorage ì—…ë°ì´íŠ¸
            if (entries.length > 0) {
                saveUserData();
            }
        }

        // ì‚¬ìš©ìë³„ ë°ì´í„° ì €ì¥ (í–¥í›„ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ ëŒ€ë¹„)
        function saveUserData() {
            if (currentUser.isLoggedIn && currentUser.id) {
                const userDataKey = `user_${currentUser.id}_travelEntries`;
                localStorage.setItem(userDataKey, JSON.stringify(entries));
            } else {
                // í˜„ì¬ëŠ” ê¸°ì¡´ ë°©ì‹ ìœ ì§€ (ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ììš©)
                localStorage.setItem('travelEntries', JSON.stringify(entries));
            }
        }
        
        // êµ­ê°€ í•„í„°ë§ í•¨ìˆ˜
        function filterCountries(query) {
            if (!query) return countries;
            const lowerQuery = query.toLowerCase();
            return countries.filter(country => 
                country.label.toLowerCase().includes(lowerQuery) ||
                country.enLabel.toLowerCase().includes(lowerQuery) ||
                country.code.toLowerCase().includes(lowerQuery) ||
                country.aliases.some(alias => alias.toLowerCase().includes(lowerQuery))
            );
        }
        
        // ë„ì‹œ í•„í„°ë§ í•¨ìˆ˜
        function filterCities(query, countryCode) {
            if (!countryCode || !cities[countryCode]) return [];
            if (!query) return cities[countryCode];
            
            const lowerQuery = query.toLowerCase();
            return cities[countryCode].filter(city => 
                city.name.toLowerCase().includes(lowerQuery) ||
                city.enName.toLowerCase().includes(lowerQuery) ||
                city.aliases.some(alias => alias.toLowerCase().includes(lowerQuery))
            );
        }
        
        // êµ­ê°€ ë“œë¡­ë‹¤ìš´ ë Œë”ë§
        function renderCountryDropdown(filteredCountries) {
            if (filteredCountries.length === 0) {
                countryDropdown.innerHTML = '<li class="px-3 py-2 text-gray-500 text-sm">ì¼ì¹˜í•˜ëŠ” êµ­ê°€ê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                countryDropdown.classList.remove('hidden');
                return;
            }
            
            countryDropdown.innerHTML = filteredCountries.map(country => `
                <li class="country-option px-3 py-2 hover:bg-blue-50 cursor-pointer text-sm" 
                    data-code="${country.code}" 
                    data-label="${country.label}">
                    <span class="font-medium">${country.label}</span>
                    <span class="text-gray-500 ml-2">(${country.code})</span>
                </li>
            `).join('');
            
            countryDropdown.classList.remove('hidden');
        }
        
        // ë„ì‹œ ë“œë¡­ë‹¤ìš´ ë Œë”ë§
        function renderCityDropdown(filteredCities) {
            if (filteredCities.length === 0) {
                cityDropdown.innerHTML = '<li class="px-3 py-2 text-gray-500 text-sm">ì¼ì¹˜í•˜ëŠ” ë„ì‹œê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                cityDropdown.classList.remove('hidden');
                return;
            }
            
            cityDropdown.innerHTML = filteredCities.map(city => `
                <li class="city-option px-3 py-2 hover:bg-blue-50 cursor-pointer text-sm" 
                    data-name="${city.name}" 
                    data-en-name="${city.enName}">
                    <span class="font-medium">${city.name}</span>
                    <span class="text-gray-500 ml-2">(${city.enName})</span>
                </li>
            `).join('');
            
            cityDropdown.classList.remove('hidden');
        }
        
        // êµ­ê°€ ì„ íƒ ì²˜ë¦¬
        function selectCountry(code, label) {
            countryInput.value = label;
            countryCode.value = code;
            countryLabel.value = label;
            countryDropdown.classList.add('hidden');
            
            // ë„ì‹œ ì…ë ¥ í•„ë“œ í™œì„±í™” ë° ì´ˆê¸°í™”
            cityInput.disabled = false;
            cityInput.value = '';
            cityName.value = '';
            cityInput.placeholder = 'ë„ì‹œëª…ì„ ì…ë ¥í•˜ê±°ë‚˜ ì„ íƒí•˜ì„¸ìš”';
        }
        
        // êµ­ê°€ ì…ë ¥ê°’ ìë™ ë§¤ì¹­
        function autoSelectCountry(inputValue) {
            const filteredCountries = filterCountries(inputValue);
            if (filteredCountries.length === 1) {
                const country = filteredCountries[0];
                selectCountry(country.code, country.label);
                return true;
            }
            return false;
        }
        
        // ë„ì‹œ ì„ íƒ ì²˜ë¦¬
        function selectCity(name, enName) {
            cityInput.value = name;
            cityName.value = name;
            cityDropdown.classList.add('hidden');
        }
        
        // ë„ì‹œ ì…ë ¥ê°’ ìë™ ë§¤ì¹­
        function autoSelectCity(inputValue, countryCode) {
            const filteredCities = filterCities(inputValue, countryCode);
            if (filteredCities.length === 1) {
                const city = filteredCities[0];
                selectCity(city.name, city.enName);
                return true;
            }
            return false;
        }



        // ëª©ì  í…ìŠ¤íŠ¸ ë³€í™˜ í•¨ìˆ˜
        function getPurposeText(purpose) {
            const textMap = {
                'travel': 'ì—¬í–‰',
                'business': 'ì¶œì¥',
                'study': 'ìœ í•™',
                'working-holiday': 'ì›Œí‚¹ í™€ë¦¬ë°ì´',
                'family-visit': 'ê°€ì¡± ë°©ë¬¸',
                'dispatch': 'íŒŒê²¬',
                'exchange': 'êµí™˜í•™ìƒ',
                'volunteer': 'ë´‰ì‚¬í™œë™',
                'medical': 'ì˜ë£Œ',
                'language': 'ì–´í•™ ì—°ìˆ˜',
                'transit': 'ë¹„í–‰ ê²½ìœ '
            };
            return textMap[purpose] || purpose;
        }

        // íˆ´íŒ ìƒì„± í•¨ìˆ˜
        function createTooltip(event, tooltipContent) {
            // ê¸°ì¡´ íˆ´íŒ ì œê±°
            const existingTooltip = document.querySelector('.calendar-tooltip');
            if (existingTooltip) {
                existingTooltip.remove();
            }

            const tooltip = document.createElement('div');
            tooltip.className = 'calendar-tooltip fixed z-50 bg-gray-900 text-white text-sm rounded-lg px-3 py-2 shadow-lg max-w-xs pointer-events-none space-y-1';
            
            // í…ìŠ¤íŠ¸ë¥¼ ì¤„ë°”ê¿ˆìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ HTMLë¡œ ë³€í™˜
            const lines = tooltipContent.split('\\n');
            const htmlContent = lines.map((line, index) => {
                const escapedLine = line.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
                if (index === 0) {
                    return `<div class="font-semibold">${escapedLine}</div>`;
                } else {
                    return `<div class="text-gray-300">${escapedLine}</div>`;
                }
            }).join('');
            tooltip.innerHTML = htmlContent;
            
            document.body.appendChild(tooltip);

            // íˆ´íŒ ìœ„ì¹˜ ê³„ì‚°
            const rect = event.target.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            
            let left = rect.left + (rect.width / 2) - (tooltipRect.width / 2);
            let top = rect.bottom + 8;

            // í™”ë©´ ê²½ê³„ ì²´í¬
            if (left < 8) left = 8;
            if (left + tooltipRect.width > window.innerWidth - 8) {
                left = window.innerWidth - tooltipRect.width - 8;
            }
            if (top + tooltipRect.height > window.innerHeight - 8) {
                top = rect.top - tooltipRect.height - 8;
            }

            tooltip.style.left = left + 'px';
            tooltip.style.top = top + 'px';
        }

        // íˆ´íŒ ì œê±° í•¨ìˆ˜
        function removeTooltip() {
            const tooltip = document.querySelector('.calendar-tooltip');
            if (tooltip) {
                tooltip.remove();
            }
        }

        // ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬
        let touchTimeout = null;
        let activeTooltip = null;

        function handleTouchEvent(event, tooltipContent) {
            event.preventDefault();
            
            if (activeTooltip) {
                // ì´ë¯¸ ì—´ë¦° íˆ´íŒì´ ìˆìœ¼ë©´ ë‹«ê¸°
                removeTooltip();
                activeTooltip = null;
            } else {
                // íˆ´íŒ ì—´ê¸°
                createTooltip(event, tooltipContent);
                activeTooltip = event.target;
                
                // ë‹¤ë¥¸ ê³³ í„°ì¹˜ ì‹œ íˆ´íŒ ë‹«ê¸°
                setTimeout(() => {
                    document.addEventListener('touchstart', function closeTooltip(e) {
                        if (!event.target.contains(e.target)) {
                            removeTooltip();
                            activeTooltip = null;
                            document.removeEventListener('touchstart', closeTooltip);
                        }
                    }, { once: true });
                }, 100);
            }
        }

        // ë‚ ì§œ ì°¨ì´ ê³„ì‚° (ì²´ë¥˜ì¼ ìˆ˜)
        function calculateDays(startDate, endDate) {
            const start = new Date(startDate);
            const end = new Date(endDate);
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays + 1; // ì‹œì‘ì¼ í¬í•¨
        }

        // í†µê³„ ê³„ì‚°
        function calculateStats() {
            if (entries.length === 0) {
                document.getElementById('total-countries').textContent = '0';
                document.getElementById('total-cities').textContent = '0';
                document.getElementById('total-days').textContent = '0';
                document.getElementById('travel-summary').innerHTML = '<p class="text-gray-500">ì•„ì§ ë“±ë¡ëœ ì—¬í–‰ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            // ì¤‘ë³µ ì œê±°ëœ êµ­ê°€ì™€ ë„ì‹œ
            const countries = [...new Set(entries.map(entry => entry.country))];
            const cities = [...new Set(entries.map(entry => entry.city))];
            
            // ì´ ì²´ë¥˜ì¼ ê³„ì‚°
            const totalDays = entries.reduce((sum, entry) => {
                return sum + calculateDays(entry.startDate, entry.endDate);
            }, 0);

            // í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('total-countries').textContent = countries.length;
            document.getElementById('total-cities').textContent = cities.length;
            document.getElementById('total-days').textContent = totalDays;

            // ìš”ì•½ ì •ë³´ ìƒì„±
            const summaryHTML = `
                <div class="space-y-2">
                    <p><strong>ì´ ì—¬í–‰ íšŸìˆ˜:</strong> ${entries.length}íšŒ</p>
                    <p><strong>ë°©ë¬¸ êµ­ê°€:</strong> ${countries.join(', ')}</p>
                    <p><strong>ë°©ë¬¸ ë„ì‹œ:</strong> ${cities.join(', ')}</p>
                    <p><strong>í‰ê·  ì²´ë¥˜ì¼:</strong> ${Math.round(totalDays / entries.length)}ì¼</p>
                </div>
            `;
            document.getElementById('travel-summary').innerHTML = summaryHTML;
        }

        // íƒ€ì„ë¼ì¸ ë Œë”ë§
        function renderTimeline() {
            const timelineList = document.getElementById('timeline-list');
            const timelineEmpty = document.getElementById('timeline-empty');

            if (entries.length === 0) {
                timelineList.style.display = 'none';
                timelineEmpty.style.display = 'block';
                return;
            }

            timelineList.style.display = 'block';
            timelineEmpty.style.display = 'none';

            // ë‚ ì§œìˆœìœ¼ë¡œ ì •ë ¬ (ìµœì‹ ìˆœ)
            const sortedEntries = [...entries].sort((a, b) => new Date(b.startDate) - new Date(a.startDate));

            timelineList.innerHTML = sortedEntries.map(entry => {
                const days = calculateDays(entry.startDate, entry.endDate);
                const purposeText = {
                    'travel': 'ì—¬í–‰',
                    'business': 'ì¶œì¥',
                    'study': 'ìœ í•™',
                    'working-holiday': 'ì›Œí‚¹ í™€ë¦¬ë°ì´',
                    'family-visit': 'ê°€ì¡± ë°©ë¬¸',
                    'dispatch': 'íŒŒê²¬',
                    'exchange': 'êµí™˜í•™ìƒ',
                    'volunteer': 'ë´‰ì‚¬í™œë™',
                    'medical': 'ì˜ë£Œ',
                    'language': 'ì–´í•™ ì—°ìˆ˜',
                    'transit': 'ë¹„í–‰ ê²½ìœ '
                }[entry.purpose] || entry.purpose;

                return `
                    <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">${entry.country} / ${entry.city}</h3>
                                <p class="text-sm text-gray-600">${purposeText}</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">
                                    ${days}ì¼
                                </span>
                                <div class="flex space-x-1">
                                    <button onclick="modifyEntry('${entry.id}')" class="text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded hover:bg-yellow-200 transition-colors">
                                        ìˆ˜ì •
                                    </button>
                                    <button onclick="deleteEntry('${entry.id}')" class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded hover:bg-red-200 transition-colors">
                                        ì‚­ì œ
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="text-sm text-gray-500 mb-3">
                            ğŸ“… ${entry.startDate} ~ ${entry.endDate}
                        </div>
                        ${entry.memo ? `<p class="text-sm text-gray-600 bg-gray-50 p-3 rounded">ğŸ“ ${entry.memo}</p>` : ''}
                    </div>
                `;
            }).join('');
        }

        // ìº˜ë¦°ë” ë Œë”ë§
        function renderCalendar() {
            const calendarBody = document.getElementById('calendar-body');
            const calendarEmpty = document.getElementById('calendar-empty');
            const currentMonthElement = document.getElementById('current-month');

            if (entries.length === 0) {
                calendarBody.style.display = 'none';
                calendarEmpty.style.display = 'block';
                return;
            }

            calendarBody.style.display = 'table-row-group';
            calendarEmpty.style.display = 'none';

            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            currentMonthElement.textContent = `${year}ë…„ ${month + 1}ì›”`;

            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            let calendarHTML = '';
            let currentRow = '';

            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);

                if (i % 7 === 0 && i > 0) {
                    calendarHTML += `<tr>${currentRow}</tr>`;
                    currentRow = '';
                }

                const isCurrentMonth = currentDate.getMonth() === month;
                const isToday = currentDate.toDateString() === new Date().toDateString();
                
                // í•´ë‹¹ ë‚ ì§œì˜ ì¼ì • ì°¾ê¸°
                const dayEvents = entries.filter(entry => {
                    const eventStart = new Date(entry.startDate);
                    const eventEnd = new Date(entry.endDate);
                    return currentDate >= eventStart && currentDate <= eventEnd;
                });

                let dayContent = `<div class="text-sm">${currentDate.getDate()}</div>`;
                
                if (dayEvents.length > 0) {
                    dayContent += `<div class="mt-1 space-y-1">`;
                    dayEvents.forEach((event, index) => {
                        const purposeText = getPurposeText(event.purpose);
                        
                        // íˆ´íŒ ë‚´ìš©ì„ ì•ˆì „í•˜ê²Œ ìƒì„±
                        const tooltipText = `${event.country} / ${event.city}\\n${purposeText}\\nğŸ“… ${event.startDate} ~ ${event.endDate}${event.memo ? '\\nğŸ“ ' + event.memo : ''}`;
                        
                        // ì´ë²¤íŠ¸ ìƒ‰ìƒ í´ë˜ìŠ¤ ê²°ì • (ìˆœí™˜)
                        const colorClass = `event-${(index % 8) + 1}`;
                        
                        dayContent += `
                            <div class="calendar-event ${colorClass}"
                                 data-event-index="${index}"
                                 data-tooltip="${tooltipText.replace(/"/g, '&quot;')}"
                                 onmouseenter="createTooltip(event, this.dataset.tooltip)"
                                 onmouseleave="removeTooltip()"
                                 ontouchstart="handleTouchEvent(event, this.dataset.tooltip)"
                                 title="${event.country}">
                                ${event.country}
                            </div>
                        `;
                    });
                    dayContent += `</div>`;
                }

                const cellClass = `
                    border border-gray-200 p-2 h-28 align-top
                    ${isCurrentMonth ? 'bg-white' : 'bg-gray-50 text-gray-400'}
                    ${isToday ? 'bg-blue-50 border-blue-200' : ''}
                `;

                currentRow += `<td class="${cellClass}">${dayContent}</td>`;
            }

            if (currentRow) {
                calendarHTML += `<tr>${currentRow}</tr>`;
            }

            calendarBody.innerHTML = calendarHTML;
        }

        // ëª¨ë“  ì„¹ì…˜ ì—…ë°ì´íŠ¸
        function updateAllSections() {
            calculateStats();
            renderTimeline();
            renderCalendar();
        }

        // ìˆ˜ì • í•¨ìˆ˜
        function modifyEntry(entryId) {
            const entry = entries.find(e => e.id === entryId);
            if (!entry) return;

            // ìˆ˜ì • ëª¨ë“œ ì„¤ì •
            isEditMode = true;
            editingEntryId = entryId;

            // ëª¨ë‹¬ ì œëª© ë³€ê²½
            document.querySelector('#modal-overlay h2').textContent = 'ì—¬í–‰ ìˆ˜ì •';

            // í¼ì— ê¸°ì¡´ ë°ì´í„° ì±„ìš°ê¸°
            document.getElementById('country-input').value = entry.country;
            document.getElementById('country-code').value = entry.countryCode;
            document.getElementById('country-label').value = entry.countryLabel;
            document.getElementById('city-input').value = entry.city;
            document.getElementById('city-name').value = entry.cityName;
            document.getElementById('start-date').value = entry.startDate;
            document.getElementById('end-date').value = entry.endDate;
            document.getElementById('purpose').value = entry.purpose;
            document.getElementById('memo').value = entry.memo || '';

            // ë„ì‹œ ì…ë ¥ í•„ë“œ í™œì„±í™”
            document.getElementById('city-input').disabled = false;

            // ì œì¶œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
            const submitBtn = document.querySelector('#travel-form button[type="submit"]');
            submitBtn.textContent = 'ìˆ˜ì •';

            // ëª¨ë‹¬ ì—´ê¸°
            modalOverlay.classList.remove('hidden');
            modalOverlay.classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        // ì‚­ì œ í•¨ìˆ˜
        function deleteEntry(entryId) {
            if (confirm('ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                entries = entries.filter(entry => entry.id !== entryId);
                saveUserData();
                updateAllSections();
                alert('ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // êµ­ê°€ ìë™ì™„ì„± ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
        countryInput.addEventListener('input', function() {
            const query = this.value;
            const filteredCountries = filterCountries(query);
            renderCountryDropdown(filteredCountries);
        });
        
        countryInput.addEventListener('focus', function() {
            if (this.value) {
                const filteredCountries = filterCountries(this.value);
                renderCountryDropdown(filteredCountries);
            } else {
                renderCountryDropdown(countries);
            }
        });
        
        countryInput.addEventListener('blur', function() {
            // ì•½ê°„ì˜ ì§€ì—°ì„ ë‘ì–´ í´ë¦­ ì´ë²¤íŠ¸ê°€ ì²˜ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•¨
            setTimeout(() => {
                countryDropdown.classList.add('hidden');
                
                // êµ­ê°€ê°€ ì„ íƒë˜ì§€ ì•Šì•˜ê³  ì…ë ¥ê°’ì´ ìˆìœ¼ë©´ ìë™ ë§¤ì¹­ ì‹œë„
                if (!countryCode.value && this.value.trim()) {
                    autoSelectCountry(this.value.trim());
                }
            }, 200);
        });
        
        // êµ­ê°€ ì…ë ¥ í•„ë“œì—ì„œ ì—”í„° í‚¤ ì²˜ë¦¬
        countryInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                if (!countryCode.value && this.value.trim()) {
                    autoSelectCountry(this.value.trim());
                }
            }
        });
        
        // êµ­ê°€ ì˜µì…˜ í´ë¦­ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ìœ„ì„ ì‚¬ìš©)
        countryDropdown.addEventListener('click', function(e) {
            if (e.target.closest('.country-option')) {
                const option = e.target.closest('.country-option');
                const code = option.dataset.code;
                const label = option.dataset.label;
                selectCountry(code, label);
            }
        });
        
        // ë„ì‹œ ìë™ì™„ì„± ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤
        cityInput.addEventListener('input', function() {
            const query = this.value;
            const selectedCountryCode = document.getElementById('country-code').value;
            const filteredCities = filterCities(query, selectedCountryCode);
            renderCityDropdown(filteredCities);
        });
        
        cityInput.addEventListener('focus', function() {
            const selectedCountryCode = document.getElementById('country-code').value;
            if (!selectedCountryCode) {
                cityInput.placeholder = 'ë¨¼ì € êµ­ê°€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”';
                return;
            }
            
            if (this.value) {
                const filteredCities = filterCities(this.value, selectedCountryCode);
                renderCityDropdown(filteredCities);
            } else {
                renderCityDropdown(cities[selectedCountryCode] || []);
            }
        });
        
        cityInput.addEventListener('blur', function() {
            // ì•½ê°„ì˜ ì§€ì—°ì„ ë‘ì–´ í´ë¦­ ì´ë²¤íŠ¸ê°€ ì²˜ë¦¬ë  ìˆ˜ ìˆë„ë¡ í•¨
            setTimeout(() => {
                cityDropdown.classList.add('hidden');
                
                // ë„ì‹œê°€ ì„ íƒë˜ì§€ ì•Šì•˜ê³  ì…ë ¥ê°’ì´ ìˆìœ¼ë©´ ìë™ ë§¤ì¹­ ì‹œë„
                const selectedCountryCode = document.getElementById('country-code').value;
                if (!cityName.value && this.value.trim() && selectedCountryCode) {
                    autoSelectCity(this.value.trim(), selectedCountryCode);
                }
            }, 200);
        });
        
        // ë„ì‹œ ì…ë ¥ í•„ë“œì—ì„œ ì—”í„° í‚¤ ì²˜ë¦¬
        cityInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                const selectedCountryCode = document.getElementById('country-code').value;
                if (!cityName.value && this.value.trim() && selectedCountryCode) {
                    autoSelectCity(this.value.trim(), selectedCountryCode);
                }
            }
        });
        
        // ë„ì‹œ ì˜µì…˜ í´ë¦­ ì´ë²¤íŠ¸ (ì´ë²¤íŠ¸ ìœ„ì„ ì‚¬ìš©)
        cityDropdown.addEventListener('click', function(e) {
            if (e.target.closest('.city-option')) {
                const option = e.target.closest('.city-option');
                const name = option.dataset.name;
                const enName = option.dataset.enName;
                selectCity(name, enName);
            }
        });
        
        // ëª¨ë‹¬ ì—´ê¸°
        floatingBtn.addEventListener('click', function() {
            modalOverlay.classList.remove('hidden');
            modalOverlay.classList.add('flex');
            document.body.style.overflow = 'hidden';
        });

        // ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜
        function closeModalFunction() {
            modalOverlay.classList.add('hidden');
            modalOverlay.classList.remove('flex');
            document.body.style.overflow = '';
            travelForm.reset();
            
            // ìˆ˜ì • ëª¨ë“œ ë¦¬ì…‹
            isEditMode = false;
            editingEntryId = null;
            
            // ëª¨ë‹¬ ì œëª©ê³¼ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë˜ëŒ€ë¡œ ë³µì›
            document.querySelector('#modal-overlay h2').textContent = 'ìƒˆ ì—¬í–‰ ì¶”ê°€';
            const submitBtn = document.querySelector('#travel-form button[type="submit"]');
            submitBtn.textContent = 'ì¶”ê°€';
            
            // ë„ì‹œ ì…ë ¥ í•„ë“œ ë¹„í™œì„±í™”
            document.getElementById('city-input').disabled = true;
            document.getElementById('city-input').placeholder = 'êµ­ê°€ë¥¼ ë¨¼ì € ì„ íƒí•œ í›„ ë„ì‹œëª…ì„ ì…ë ¥í•˜ì„¸ìš”';
        }

        // X ë²„íŠ¼ìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        closeModal.addEventListener('click', closeModalFunction);

        // ì·¨ì†Œ ë²„íŠ¼ìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        cancelBtn.addEventListener('click', closeModalFunction);

        // ì˜¤ë²„ë ˆì´ í´ë¦­ìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        modalOverlay.addEventListener('click', function(e) {
            if (e.target === modalOverlay) {
                closeModalFunction();
            }
        });

        // ë‚ ì§œ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
        function validateDates() {
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            
            if (startDate && endDate) {
                const start = new Date(startDate);
                const end = new Date(endDate);
                
                if (end < start) {
                    alert('ì²´ë¥˜ ì¢…ë£Œì¼ì€ ì²´ë¥˜ ì‹œì‘ì¼ë³´ë‹¤ ì´ì „ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return false;
                }
            }
            return true;
        }

        // ì‹œì‘ì¼ ë³€ê²½ ì‹œ ì¢…ë£Œì¼ ìµœì†Œê°’ ì„¤ì •
        document.getElementById('start-date').addEventListener('change', function() {
            const startDate = this.value;
            const endDateInput = document.getElementById('end-date');
            
            if (startDate) {
                endDateInput.min = startDate;
                
                // í˜„ì¬ ì¢…ë£Œì¼ì´ ì‹œì‘ì¼ë³´ë‹¤ ì´ì „ì´ë©´ ì¢…ë£Œì¼ì„ ì‹œì‘ì¼ë¡œ ì„¤ì •
                if (endDateInput.value && endDateInput.value < startDate) {
                    endDateInput.value = startDate;
                }
            }
        });

        // ì¢…ë£Œì¼ ë³€ê²½ ì‹œ ìœ íš¨ì„± ê²€ì‚¬
        document.getElementById('end-date').addEventListener('change', function() {
            const startDate = document.getElementById('start-date').value;
            const endDate = this.value;
            
            if (startDate && endDate) {
                const start = new Date(startDate);
                const end = new Date(endDate);
                
                if (end < start) {
                    alert('ì²´ë¥˜ ì¢…ë£Œì¼ì€ ì²´ë¥˜ ì‹œì‘ì¼ë³´ë‹¤ ì´ì „ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    this.value = startDate; // ì¢…ë£Œì¼ì„ ì‹œì‘ì¼ë¡œ ì„¤ì •
                }
            }
        });

        // í¼ ì œì¶œ ì²˜ë¦¬
        travelForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // ë‚ ì§œ ìœ íš¨ì„± ê²€ì‚¬
            if (!validateDates()) {
                return;
            }
            
            const formData = {
                country: document.getElementById('country-input').value,
                countryCode: document.getElementById('country-code').value,
                countryLabel: document.getElementById('country-label').value,
                city: document.getElementById('city-input').value,
                cityName: document.getElementById('city-name').value,
                startDate: document.getElementById('start-date').value,
                endDate: document.getElementById('end-date').value,
                purpose: document.getElementById('purpose').value,
                memo: document.getElementById('memo').value
            };

            if (isEditMode && editingEntryId) {
                // ìˆ˜ì • ëª¨ë“œ: ê¸°ì¡´ entry ì—…ë°ì´íŠ¸
                const index = entries.findIndex(e => e.id === editingEntryId);
                if (index !== -1) {
                    formData.id = editingEntryId; // ê¸°ì¡´ ID ìœ ì§€
                    entries[index] = formData;
                    saveUserData();
                    updateAllSections();
                    console.log('ìˆ˜ì •ëœ ì—¬í–‰ ë°ì´í„°:', JSON.stringify(formData, null, 2));
                    closeModalFunction();
                    alert('ì—¬í–‰ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            } else {
                // ì¶”ê°€ ëª¨ë“œ: ìƒˆ entry ì¶”ê°€
                formData.id = Date.now().toString(); // ê³ ìœ  ID ì¶”ê°€
                entries.push(formData);
                saveUserData();
                updateAllSections();
                console.log('ì—¬í–‰ ë°ì´í„°:', JSON.stringify(formData, null, 2));
                closeModalFunction();
                alert('ì—¬í–‰ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
            }
        });

        // ì—°ë„/ì›” ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
        function initializeCalendarDropdowns() {
            const yearSelect = document.getElementById('year-select');
            const monthSelect = document.getElementById('month-select');
            
            // ì—°ë„ ì˜µì…˜ ìƒì„± (í˜„ì¬ ì—°ë„ ê¸°ì¤€ ì „í›„ 10ë…„)
            const currentYear = new Date().getFullYear();
            yearSelect.innerHTML = '';
            for (let year = currentYear - 10; year <= currentYear + 10; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'ë…„';
                yearSelect.appendChild(option);
            }
            
            // í˜„ì¬ ì—°ë„/ì›”ë¡œ ì„¤ì •
            yearSelect.value = currentDate.getFullYear();
            monthSelect.value = currentDate.getMonth();
        }

        // ì—°ë„/ì›” ì„ íƒ ì‹œ ìº˜ë¦°ë” ì—…ë°ì´íŠ¸
        function updateCalendarFromDropdowns() {
            const yearSelect = document.getElementById('year-select');
            const monthSelect = document.getElementById('month-select');
            
            const selectedYear = parseInt(yearSelect.value);
            const selectedMonth = parseInt(monthSelect.value);
            
            currentDate.setFullYear(selectedYear);
            currentDate.setMonth(selectedMonth);
            renderCalendar();
        }

        // ìº˜ë¦°ë” ë„¤ë¹„ê²Œì´ì…˜
        document.getElementById('prev-month').addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            updateDropdownsFromCurrentDate();
            renderCalendar();
        });

        document.getElementById('next-month').addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            updateDropdownsFromCurrentDate();
            renderCalendar();
        });

        // ë“œë¡­ë‹¤ìš´ ê°’ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.getElementById('year-select').addEventListener('change', updateCalendarFromDropdowns);
        document.getElementById('month-select').addEventListener('change', updateCalendarFromDropdowns);

        // í˜„ì¬ ë‚ ì§œì— ë§ì¶° ë“œë¡­ë‹¤ìš´ ê°’ ì—…ë°ì´íŠ¸
        function updateDropdownsFromCurrentDate() {
            const yearSelect = document.getElementById('year-select');
            const monthSelect = document.getElementById('month-select');
            
            yearSelect.value = currentDate.getFullYear();
            monthSelect.value = currentDate.getMonth();
        }

        // íƒ­ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const targetSection = this.getAttribute('data-section');
                
                // ëª¨ë“  íƒ­ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('.nav-tab').forEach(t => {
                    t.classList.remove('active');
                    t.classList.add('text-gray-600');
                });
                
                // í´ë¦­ëœ íƒ­ì— active í´ë˜ìŠ¤ ì¶”ê°€
                this.classList.add('active');
                this.classList.remove('text-gray-600');
                
                // ëª¨ë“  ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.add('hidden');
                });
                
                // í•´ë‹¹ ì„¹ì…˜ ë³´ì´ê¸°
                const targetElement = document.getElementById(targetSection);
                if (targetElement) {
                    targetElement.classList.remove('hidden');
                    targetElement.classList.add('block');
                }

                // ìº˜ë¦°ë” ì„¹ì…˜ìœ¼ë¡œ ì´ë™í•  ë•Œ ìº˜ë¦°ë” ë‹¤ì‹œ ë Œë”ë§
                if (targetSection === 'calendar') {
                    updateDropdownsFromCurrentDate();
                    renderCalendar();
                }
            });
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadUserData();
            updateAllSections();
            updateUserInterface();
            
            // ìº˜ë¦°ë” ë“œë¡­ë‹¤ìš´ ì´ˆê¸°í™”
            initializeCalendarDropdowns();
            
            // ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('login-btn').addEventListener('click', function() {
                // í–¥í›„ ì‹¤ì œ ë¡œê·¸ì¸ ì‹œìŠ¤í…œ ì—°ë™ ì˜ˆì •
                alert('ë¡œê·¸ì¸ ê¸°ëŠ¥ì€ í–¥í›„ Firebase Auth ë˜ëŠ” Supabase Authë¡œ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
            });
            
            document.getElementById('logout-btn').addEventListener('click', logout);
            
            // ì„¤ì • í˜ì´ì§€ ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            document.getElementById('demo-login-btn').addEventListener('click', demoLogin);
            document.getElementById('export-data-btn').addEventListener('click', exportData);
            document.getElementById('backup-data-btn').addEventListener('click', exportData);
            document.getElementById('reset-data-btn').addEventListener('click', resetData);
            
            // ì¤€ë¹„ ì¤‘ì¸ ê¸°ëŠ¥ë“¤
            document.getElementById('dark-mode-toggle').addEventListener('click', function() {
                alert('ë‹¤í¬ ëª¨ë“œ ê¸°ëŠ¥ì€ í–¥í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
            });
            
            document.getElementById('language-toggle').addEventListener('click', function() {
                alert('ì–¸ì–´ ì„¤ì • ê¸°ëŠ¥ì€ í–¥í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.');
            });
        });

        // ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
        function updateUserInterface() {
            const userInfo = document.getElementById('user-info');
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            const loginStatus = document.getElementById('login-status');
            const usernameElement = document.getElementById('username');
            const userInitial = document.getElementById('user-initial');

            if (currentUser.isLoggedIn) {
                // ë¡œê·¸ì¸ëœ ìƒíƒœ
                userInfo.classList.remove('hidden');
                loginBtn.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
                loginStatus.textContent = `ë¡œê·¸ì¸ë¨ (${currentUser.username})`;
                usernameElement.textContent = currentUser.username;
                userInitial.textContent = currentUser.username.charAt(0).toUpperCase();
            } else {
                // ë¡œê·¸ì¸ë˜ì§€ ì•Šì€ ìƒíƒœ
                userInfo.classList.add('hidden');
                loginBtn.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
                loginStatus.textContent = 'ë¡œê·¸ì¸ë˜ì§€ ì•ŠìŒ';
            }
        }

        // ë°ëª¨ ë¡œê·¸ì¸ í•¨ìˆ˜
        function demoLogin() {
            currentUser = {
                id: 'demo_user_001',
                username: 'ë°ëª¨ ì‚¬ìš©ì',
                isLoggedIn: true
            };
            
            // ì‚¬ìš©ìë³„ ë°ì´í„° ë¡œë“œ
            loadUserData();
            updateUserInterface();
            updateAllSections();
            
            alert('ë°ëª¨ ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ë°ì´í„°ëŠ” ë¡œì»¬ì— ì €ì¥ë©ë‹ˆë‹¤.')) {
                currentUser = {
                    id: null,
                    username: null,
                    isLoggedIn: false
                };
                
                // ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ììš© ë°ì´í„° ë¡œë“œ
                loadUserData();
                updateUserInterface();
                updateAllSections();
                
                alert('ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸° í•¨ìˆ˜
        function exportData() {
            const data = {
                user: currentUser,
                entries: entries,
                exportDate: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `travel_data_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            URL.revokeObjectURL(url);
            alert('ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤!');
        }

        // ë°ì´í„° ì´ˆê¸°í™” í•¨ìˆ˜
        function resetData() {
            if (confirm('ëª¨ë“  ì—¬í–‰ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                entries = [];
                saveUserData();
                updateAllSections();
                alert('ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
    </script>
</body>
</html> 